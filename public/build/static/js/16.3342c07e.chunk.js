(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{150:function(e,t,a){"use strict";a.d(t,"b",function(){return O}),a.d(t,"c",function(){return j});var i=a(8),r=a(7),l=a(5),s=a(17),c=a(16),p=a(27),n=a(18),o=a(0),m=a.n(o),d=a(22),_=a(13),u=a.n(_),g=a(11),h=(a(4),a(32)),f=a(19),v=a.n(f),y=a(87),b=(a(101),a(15)),z=a(83),E=a(107),C=a(90),N=a(95);function O(){return{fields:{domain_id:b.a.DOMAIN_ID,promize_domain_clipart_category_id:null,clipart_category_name:"",clipart_category_code:"",clipart_category_image:"",clipart_image_url:"",imageKey:"",parent_id:null,promize_clipart_category_images:[],status:!0},inputErrors:{},isEdit:!0,clipart_saved:!1,enableEditClipart:!1}}var j=function(e){return{clipart_category_name:"required"}},k=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).closePopup=function(){a.setState({popup:!1})},a.state={imageKey:"",promize_clipart_category_images:{promize_domain_clipart_category_id:a.props.state.fields.promize_attribute_id,promize_clipart_category_images_id:null,clipart_name:"",clipart_code:"",promize_product_clipart_image:"",clipart_price:null},popup:!1},a.setImageKey=a.setImageKey.bind(Object(p.a)(a)),a.handleUploadedImage=a.handleUploadedImage.bind(Object(p.a)(a)),a.handleFieldChange=a.handleFieldChange.bind(Object(p.a)(a)),a.handleAddOption=a.handleAddOption.bind(Object(p.a)(a)),a.showClipartContentPopup=a.showClipartContentPopup.bind(Object(p.a)(a)),a.onChangeHandler=a.onChangeHandler.bind(Object(p.a)(a)),a}return Object(n.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch(Object(C.c)())}},{key:"handleUploadedImage",value:function(e){var t=this,a=e.imageUpload.response;if(a.status&&200===a.status)if("clipart_category_image"==this.state.imageKey){var i=this.props.currentComponent.state.fields,r=Object.assign({},i,{clipart_image_url:a.file.path,clipart_category_image:a.file.path});this.props.currentComponent.setState({fields:r})}else if("promize_product_clipart_image"==this.state.imageKey){var l=this.state.promize_clipart_category_images,s=Object.assign({},l,{promize_product_clipart_image:a.file.path});this.setState({promize_clipart_category_images:s},function(){var e=t.state.promize_clipart_category_images;t.props.dispatch(Object(C.e)(e))})}}},{key:"handleFieldChange",value:function(e,t){e.preventDefault();var a=this.state.promize_clipart_category_images,i=a;i[t]=e.target.value,a=Object.assign({},a,i),this.setState({promize_clipart_category_images:a})}},{key:"showClipartContentPopup",value:function(e,t,a){if(e.preventDefault(),void 0!==a){var i=this.state.promize_clipart_category_images;t.arrayIndex=a;var r=Object.assign({},i,t);this.setState({promize_clipart_category_images:r})}else{var l=this.state.promize_clipart_category_images;l.promize_domain_clipart_category_id=this.props.state.fields.promize_domain_clipart_category_id,this.props.dispatch(Object(C.e)(l))}}},{key:"hideClipartContentPopup",value:function(e){e&&e.preventDefault(),u()(".promize-modal-cover").hide();var t={promize_domain_clipart_category_id:this.props.state.fields.promize_domain_clipart_category_id,promize_clipart_category_images_id:null,clipart_name:"",clipart_code:"",promize_product_clipart_image:"",clipart_price:null};this.setState({promize_clipart_category_images:t})}},{key:"handleAddOption",value:function(e){var t=this;if(e.preventDefault(),this.state.promize_clipart_category_images.clipart_name&&this.state.promize_clipart_category_images.promize_product_clipart_image){var a=this.props.state.fields,i=a.promize_clipart_category_images;if(this.state.enableEditClipart){var r=i.findIndex(function(e){return e.promize_clipart_category_images_id==t.state.promize_clipart_category_images.promize_clipart_category_images_id});i[r]=this.state.promize_clipart_category_images}else i.push(this.state.promize_clipart_category_images);var l=Object.assign({},a,{promize_clipart_category_images:i});this.setState({enableEditClipart:!1}),this.props.currentComponent.setState({fields:l},function(){t.hideClipartContentPopup()})}else this.state.promize_clipart_category_images.clipart_name?this.state.promize_clipart_category_images.promize_product_clipart_image||v.a.error("Clipart image cannot be empty"):v.a.error("Clipart name cannot be empty")}},{key:"setImageKey",value:function(e){this.setState({imageKey:e})}},{key:"componentWillReceiveProps",value:function(e){if(e.imageUpload.response!==this.props.imageUpload.response)this.handleUploadedImage(e);else if(!e.clipartValues.isFetching&&!e.clipartValues.isError&&this.props.clipartValues.isFetching!==e.clipartValues.isFetching){var t=e.clipartValues.response.records;t.promize_product_clipart_image=this.state.promize_clipart_category_images.promize_product_clipart_image,this.setState({promize_clipart_category_images:t},function(){u()(".promize-modal-cover").show()})}}},{key:"handleInputFieldBlur",value:function(e){e.preventDefault();var t=this.state.promize_clipart_category_images;this.props.dispatch(Object(C.e)(t))}},{key:"clipartContent",value:function(){var e=this;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"promize-modal-cover",style:{display:"none"}},m.a.createElement("div",{className:"promize-modal modal-sm"},m.a.createElement("div",{className:"promize-modal-header"},m.a.createElement("h3",{className:"modal-title"},m.a.createElement("span",null,"Add New Clipart"))),m.a.createElement("div",{className:"promize-modal-body"},m.a.createElement("div",{className:"promize-form-group mt-10"},m.a.createElement(h.a,Object.assign({},this.props,{fieldName:"clipart_name",value:this.state.promize_clipart_category_images.clipart_name,labelName:"Clipart Name",onChange:function(t){e.handleFieldChange(t,"clipart_name")},validation:!1,onBlur:function(t){return e.handleInputFieldBlur(t)},placeholder:" "})),m.a.createElement(h.a,Object.assign({},this.props,{fieldName:"clipart_code",value:this.state.promize_clipart_category_images.clipart_code,labelName:"Clipart Code",onChange:function(t){e.handleFieldChange(t,"clipart_code")},validation:!1,onBlur:function(t){return e.handleInputFieldBlur(t)},placeholder:" "})),m.a.createElement(h.a,Object.assign({},this.props,{fieldName:"price",value:this.state.promize_clipart_category_images.clipart_price?this.state.promize_clipart_category_images.clipart_price:"",labelName:"Price",onChange:function(t){e.handleFieldChange(t,"clipart_price")},validation:!1,onBlur:function(t){return e.handleInputFieldBlur(t)},placeholder:" ",inputType:"number"})),m.a.createElement(z.a,Object.assign({},this.props,{setImageKey:this.setImageKey,callBack:!0,labelName:"Clipart image",fieldName:"image_file",dataName:"image_file",validation:!1,imageType:"promize_product_clipart_image",value:this.state.promize_clipart_category_images.promize_product_clipart_image,image_url:this.state.promize_clipart_category_images.promize_product_clipart_image})))),m.a.createElement("div",{className:"promize-modal-footer df df-end"},m.a.createElement("button",{className:"btn btn-promize-secondary",onClick:function(t){e.hideClipartContentPopup(t)}},"Cancel"),m.a.createElement("button",{className:"btn btn-promize-primary",onClick:function(t){e.handleAddOption(t)}},"Add")))))}},{key:"deleteClipartValues",value:function(e,t,a){var i=this;e.preventDefault();var r={title:"Remove Clipart",content:"Do you want to remove this clipart?",submit:function(){var e=i.props.state.fields,r=e.promize_clipart_category_images;r.splice(t,1);var l=Object.assign({},e,{promize_clipart_category_images:r});i.props.currentComponent.setState({fields:l},function(){i.props.dispatch(Object(C.a)({ids:[a]}))})}};this.setState({popup:r})}},{key:"editClipartValues",value:function(e,t){e.preventDefault();var a=this.props.state.fields.promize_clipart_category_images,i={};a.map(function(e,a){e.promize_clipart_category_images_id==t&&(i=e)}),this.setState({promize_clipart_category_images:i,enableEditClipart:!0},function(){u()(".promize-modal-cover").show()})}},{key:"onChangeHandler",value:function(e){var t=this.props.state.fields;t=Object(i.a)({},t,{parent_id:e.target.value?parseInt(e.target.value):""}),this.props.currentComponent.setState({fields:t})}},{key:"saveForm",value:function(e){e.preventDefault(),this.props.dispatch(Object(C.d)(this.props.state.fields)),v.a.success("Records saved successfully"),this.props.history.push("/settings/clipart")}},{key:"render",value:function(){var e=this;return m.a.createElement(m.a.Fragment,null,this.state.popup&&m.a.createElement(N.a,Object.assign({},this.state.popup,{submitButton:"Remove",cancel:this.closePopup})),m.a.createElement("form",{onSubmit:this.props.form.handleSubmit,method:"POST"},m.a.createElement("div",{className:"promize-card-body"},m.a.createElement("div",{className:"df"},m.a.createElement("div",{className:"wd-33 mr-15"},m.a.createElement(h.a,Object.assign({},this.props,{fieldName:"clipart_category_name",value:this.props.state.fields.clipart_category_name,labelName:"Clip Art List Name",validation:!0}))),m.a.createElement("div",{className:"wd-33 mr-15"},m.a.createElement(h.a,Object.assign({},this.props,{fieldName:"clipart_category_code",value:this.props.state.fields.clipart_category_code,labelName:"Clip Art List Code",validation:!1}))),this.props.cliparts.response&&m.a.createElement("div",{className:"wd-33"},m.a.createElement(E.a,{onChangeHandler:this.onChangeHandler,data:this.props.cliparts.response?this.props.cliparts.response.data:[],optionText:"clipart_category_name",optionValue:"promize_domain_clipart_category_id",value:this.props.state.fields.parent_id,name:"Clipart Name",labelName:"Parent Clip Art List"}))),m.a.createElement("div",{className:"df"},m.a.createElement("div",{className:"wd-33"},m.a.createElement(z.a,Object.assign({},this.props,{setImageKey:this.setImageKey,callBack:!0,labelName:"Clip Art List Thumbnail",fieldName:"image_file",dataName:"image_file",validation:!1,imageType:"clipart_category_image",value:this.props.state.fields.clipart_category_image,image_url:this.props.state.fields.clipart_category_image})))),!this.props.state.clipart_saved&&!this.props.state.fields.parent_id&&m.a.createElement("div",{className:"df df-end"},m.a.createElement(y.a,{className:"btn btn-promize-primary",text:"Next",response:this.props.state.fields})),this.props.state.clipart_saved&&!this.props.state.fields.parent_id&&m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"promize-card-header promize-card-innerheader"},m.a.createElement("div",{className:"promize-card-title"},m.a.createElement("h3",null,m.a.createElement("span",null,"Cliparts"))),m.a.createElement("div",{className:"promize-card-action df-end"},m.a.createElement("div",{className:"tab-links"},m.a.createElement("button",{className:"btn btn-links",onClick:function(t){e.showClipartContentPopup(t)}},m.a.createElement("i",{className:"fa fa-plus"})," Add New Clipart")))),m.a.createElement("table",{className:"promize-table table-hover table-action"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",null,"Name"),m.a.createElement("th",null,"Code"),m.a.createElement("th",null,"Image"),m.a.createElement("th",null,"Price ($)"),m.a.createElement("th",null,"Actions"))),m.a.createElement("tbody",null,0==this.props.state.fields.promize_clipart_category_images.length&&m.a.createElement("tr",null,m.a.createElement("td",{colSpan:"7"},m.a.createElement("p",{className:"promize-no-records"}," No records found"))),this.props.state.fields.promize_clipart_category_images.length>0&&this.props.state.fields.promize_clipart_category_images.map(function(t,a){return m.a.createElement("tr",{key:a},m.a.createElement("td",null,t.clipart_name),m.a.createElement("td",null,t.clipart_code),m.a.createElement("td",null,m.a.createElement("div",{className:"promize-tbl-mi-cvr"},m.a.createElement("img",{src:b.a.APP_IMAGE_BASE_URL+t.promize_product_clipart_image,className:"promize-tbl-img-sm",alt:" "}))),m.a.createElement("td",null,t.clipart_price),m.a.createElement("td",null,m.a.createElement("div",{className:"table-actions"},m.a.createElement("button",{className:"btn-tbl edit",onClick:function(a){e.editClipartValues(a,t.promize_clipart_category_images_id)}},m.a.createElement("i",{className:"fa fa-pencil-alt"})),m.a.createElement("button",{className:"btn-tbl delete",onClick:function(i){e.deleteClipartValues(i,a,t.promize_clipart_category_images_id)}},m.a.createElement("i",{className:"fa fa-trash-alt"})))))})))),m.a.createElement("div",{className:"df df-end"},(this.props.state.clipart_saved||this.props.state.fields.parent_id)&&m.a.createElement("div",{className:"promize-footer-actions"},m.a.createElement(g.c,{to:"/settings/clipart",className:"btn btn-promize-secondary"},"Cancel"),m.a.createElement("button",{className:"btn btn-promize-primary",onClick:function(t){e.saveForm(t)}},"Save"))))," ",this.clipartContent()))}}]),t}(o.Component);t.a=Object(d.b)(function(e){return{imageUpload:e.imageUpload,clipartValues:e.clipartValues,cliparts:e.cliparts}})(k)},384:function(e,t,a){"use strict";a.r(t);var i=a(7),r=a(5),l=a(17),s=a(16),c=a(27),p=a(18),n=a(0),o=a.n(n),m=a(19),d=a.n(m),_=a(4),u=a.n(_),g=a(22),h=a(150),f=a(90),v=a(82),y=a(40),b=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).isEdit=!0;var r=Object(h.c)(e);return a.clipart=y.a.getInstance(Object(c.a)(a),r,function(e){a.props.dispatch(Object(f.d)(e))},function(e){a.props.dispatch(Object(f.f)(e,"clipart_image","imageUpload"))},{}),a.state=Object(h.b)(),a.initialState=Object(h.b)(),a}return Object(p.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.id&&this.props.dispatch(Object(f.b)(this.props.match.params.id))}},{key:"componentWillReceiveProps",value:function(e){if(!e.clipart.isFetching&&!e.clipart.isError)if(e.clipart.response.data&&"editData"===e.clipart.receiveType){if(this.state.isEdit&&this.props.match.params.id){this.setState({isEdit:!1});var t=JSON.parse(JSON.stringify(e.clipart.response.data));t=u.a.set(t,"promize_domain_clipart_category_id",parseInt(this.props.match.params.id));var a=e.clipart.response.data.promize_clipart_category_images;t=u.a.set(t,"promize_clipart_category_images",a),this.initialState={fields:t},this.setState({clipart_saved:!0,fields:t})}}else"postData"===e.clipart.receiveType&&(d.a.success(e.clipart.response.message),e.history.push("/attributes"))}},{key:"render",value:function(){var e=this.props.clipart,t=1==this.state.fields.status;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"promize-card"},o.a.createElement("div",{className:"promize-card-header"},o.a.createElement("div",{className:"promize-card-title mb-10"},o.a.createElement("h3",null,o.a.createElement("span",null,"Edit Clip Art Category"))),o.a.createElement("div",{className:"promize-card-action df-end"},o.a.createElement(v.a,Object.assign({},this.props,{form:this.clipart,labelName:"Status",fieldName:"status",dataName:"status",id:1,value:t,spanLabel:{first:"Active",second:"Inactive"},checkValue:{first:!0,second:!1},validation:!1})))),o.a.createElement(h.a,Object.assign({},this.props,{currentComponent:this,form:this.clipart,clipart:e,state:this.state,reset:this.initialState,isEdit:!0}))))}}]),t}(n.Component);t.default=Object(g.b)(function(e){return{clipart:e.clipart}})(b)}}]);
//# sourceMappingURL=16.3342c07e.chunk.js.map