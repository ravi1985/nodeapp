(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{392:function(e,t,a){"use strict";a.r(t);var r=a(7),n=a(5),i=a(17),c=a(15),o=a(27),s=a(16),l=a(0),d=a.n(l),u=a(22),m=a(82),p=a(10),h=a(100),b=a(99),g=a(93),f=a(9),k=(a(18),a(31),a(40)),E=a(101),z=(a(32),a(36)),P=a(14),_=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={products:[],linkedProducts:[],inputErrors:{},loading:!1,search:""},a.search=k.a.getInstance(Object(o.a)(a),{},function(e){},function(e){},{}),a.getLinkedProducts=function(){a.props.dispatch(Object(z.b)({promize_customizer_id:a.props.promize_customizer_id}))},a.setData=function(e){if(e.bigCommerceProduct){var t=e.bigCommerceProduct.response;t!==a.props.bigCommerceProduct.response&&t.data&&(!e.bigCommerceProduct.isFetching&&t.status&&200===t.status?a.setState({products:t.data||[]}):!e.bigCommerceProduct.isFetching&&e.bigCommerceProduct.isError&&a.setState({products:[]}))}if(e.linkedProducts){var r=e.linkedProducts.response;r!==a.props.linkedProducts.response&&r.data&&(!e.linkedProducts.isFetching&&r.status&&200===r.status?a.setState({linkedProducts:r.data||[],loading:!1}):!e.linkedProducts.isFetching&&e.linkedProducts.isError&&a.setState({linkedProducts:[]}))}if(e.linkProduct){var n=e.linkProduct.response;n!==a.props.linkProduct.response&&n&&!e.linkProduct.isFetching&&n.status&&200===n.status&&a.getLinkedProducts()}},a.onChange=function(e,t,r){console.log(a.props.promize_customizer_id);var n=a.state.linkedProducts;e.target.checked?(n.push({web_product_id:t}),a.setState({loading:!0}),a.props.dispatch(Object(z.d)({web_product_id:t,promize_customizer_id:a.props.promize_customizer_id,domain_id:P.a.DOMAIN_ID}))):(n=n.filter(function(e){return e.web_product_id!==t}),a.props.dispatch(Object(z.f)({ids:[r.promize_customizer_products_id]})),a.setState({loading:!0})),a.setState({linkedProducts:n})},a.handleChange=function(e,t){a.setState(Object(f.a)({},t,e.target.value||""))},a}return Object(s.a)(t,e),Object(n.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setData(e)}},{key:"componentDidMount",value:function(){var e="eyJ1c2VyIjp7ImlkIjoxMzk0NDQ4LCJlbWFpbCI6InNhbmdlZXRoYWxAZGNrYXAuY29tIn0sIm93bmVyIjp7ImlkIjoxMzk0NDQ4LCJlbWFpbCI6InNhbmdlZXRoYWxAZGNrYXAuY29tIn0sImNvbnRleHQiOiJzdG9yZXMvNDYwM3BkbTMwYSIsInN0b3JlX2hhc2giOiI0NjAzcGRtMzBhIiwidGltZXN0YW1wIjoxNTcwNzAxODE5Ljc0Mzc0MDZ9.N2ViNTRmZTc1M2FjNDA0OTUyNWZlYmI2MjM4ZWUzZDAxNWE3NDE0M2E1MTI1YjBhMDM2NGE0NDkyNzBiZTBjZQ==";this.props.dispatch(Object(z.a)({signed_payload:e})),this.getLinkedProducts()}},{key:"render",value:function(){var e=this,t=this.state,a=t.products,r=t.search;return r&&(a=a.filter(function(e){return-1!==e.name.toLowerCase().indexOf(r.toLowerCase())})),d.a.createElement("div",{className:"promize-modal-cover"},d.a.createElement("div",{className:"promize-modal modal-md"},d.a.createElement("div",{className:"promize-modal-header"},d.a.createElement("h3",{className:"modal-title"},d.a.createElement("span",null,"Link Product"))),d.a.createElement("div",{className:"disabled"},d.a.createElement(E.a,{onChange:function(t){e.handleChange(t,"search")},value:r}),a.length>0&&d.a.createElement("table",{className:"promize-table table-hover mt-15",id:"fixTable"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{colSpan:"2"},"Product Name"),d.a.createElement("th",null,"Link"))),d.a.createElement("tbody",null,a.map(function(t,a){var r=e.state.linkedProducts.find(function(e){return e.web_product_id==t.id});return d.a.createElement("tr",{key:a},d.a.createElement("td",{width:"40px"},d.a.createElement("img",{src:t.primary_image.tiny_url})),d.a.createElement("td",null,t.name),d.a.createElement("td",null,d.a.createElement(m.a,Object.assign({},e.props,{value:!!r,fieldName:"status",id:t.id,onChange:function(a){e.onChange(a,t.id,r)},spanLabel:{first:"Active",second:"InActive"},checkValue:{first:!0,second:!1}}))))}))),!a.length>0&&d.a.createElement(g.a,null)),d.a.createElement("div",{className:"promize-modal-footer df df-end"},d.a.createElement("button",{className:"btn btn-promize-secondary m-0",onClick:function(t){return e.props.currentComponent.setState({linkProduct:{show:!1}})}},"Close"))))}}]),t}(l.Component),N=Object(u.b)(function(e){return{bigCommerceProduct:e.bigCommerceProduct,linkedProducts:e.linkedProducts,linkProduct:e.linkProduct}})(_),v=a(1),y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).displayRows=a.displayRows.bind(Object(o.a)(a)),a.state=a.initialState(),a.grid=h.a.getInstance({currentComponent:Object(o.a)(a),url:"getProductLists",actionType:v.W,method:"POST"}),a}return Object(s.a)(t,e),Object(n.a)(t,[{key:"initialState",value:function(){return{filters:{domain_id:this.props.app.DOMAIN_ID,searchVal:""},products:[],linkProduct:{show:!1}}}},{key:"componentDidMount",value:function(){this.grid.getRecords()}},{key:"setData",value:function(e){var t=e.products.response;t!==this.props.products.response&&t.data&&(!e.products.isFetching&&t.status&&200===t.status?this.setState({products:t.data||[]}):!e.products.isFetching&&e.products.isError&&this.setState({products:[]}))}},{key:"displayRows",value:function(){var e=this,t=this.state.products,a=d.a.createElement(g.a,{isFetching:this.props.products.isFetching,colspan:"10"});return t.length>0&&(a=t.map(function(t,a){var r=1==t.status;return d.a.createElement("tr",{key:a},d.a.createElement("td",null,t.promize_customizer_name),d.a.createElement("td",null,d.a.createElement(m.a,Object.assign({},e.props,{value:r,fieldName:"status",id:t.promize_customizer_id,onChange:function(a){e.grid.statusUpdate({url:"changeProductStatus",actionType:v.Y,modelName:"promize_customizer",PKey:"promize_customizer_id",params:t},a)},spanLabel:{first:"Active",second:"InActive"},checkValue:{first:!0,second:!1}}))),d.a.createElement("td",null,d.a.createElement("div",{className:"table-actions"},"bigcommerce"==P.a.PLATFORM&&d.a.createElement("button",{className:"btn-tbl link",title:"Link Product",onClick:function(a){return e.setState({linkProduct:{show:!0,promize_customizer_id:t.promize_customizer_id}})}},d.a.createElement("i",{class:"fa fa-link"})),d.a.createElement(p.c,{className:"btn-tbl edit",to:"products/edit/"+t.promize_customizer_id},d.a.createElement("i",{className:"fa fa-pencil-alt",title:"Edit Product"})),d.a.createElement("button",{className:"btn-tbl delete",onClick:function(a){return e.table.delete.handleToogleModal({id:t.promize_customizer_id,idKey:"ids",url:"deleteRecord",modelName:"promize_customizer",PKey:"promize_customizer_id",actionType:v.X},a)},title:"Delete"},d.a.createElement("i",{className:"fa fa-trash-alt"})))))})),a}},{key:"componentWillReceiveProps",value:function(e){this.setData(e)}},{key:"render",value:function(){var e=this;return d.a.createElement(b.a,Object.assign({ref:function(t){e.table=t}},this.props,this.state,{pageTitle:"Products",addButton:d.a.createElement(p.c,{className:"btn btn-promize-primary",to:"products/add"},d.a.createElement("span",null,"Add")),managementType:v.V,grid:this.grid,data:this.props.products,rowDelete:this.props.productDelete}),d.a.createElement("table",{className:"promize-table table-hover table-action",id:"fixTable"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{className:this.grid.sortType?"ASC"==this.grid.sortType?"sorting-asec":"sorting-desc":"sorting",onClick:function(t){return e.grid.handleColSorting(t)}},"Product Name"),d.a.createElement("th",null,"Status"),d.a.createElement("th",null,"Action"))),d.a.createElement("tbody",null,this.displayRows())),this.state.linkProduct.show&&"bigcommerce"==P.a.PLATFORM&&d.a.createElement(N,{promize_customizer_id:this.state.linkProduct.promize_customizer_id,currentComponent:this}))}}]),t}(l.Component);t.default=Object(u.b)(function(e){return{productStatus:e.productStatus,productDelete:e.productDelete,products:e.products}})(y)}}]);
//# sourceMappingURL=23.4a96dcd1.chunk.js.map