(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{101:function(e,t,a){"use strict";var i=a(7),n=a(5),s=a(17),r=a(16),o=a(18),l=a(0),c=a.n(l),m=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"search-container"},c.a.createElement("input",{type:"text",value:this.props.value||"",onChange:this.props.onChange,className:"promize-form-control",placeholder:"Search.. ",name:"searchVal"}),c.a.createElement("i",{className:"fa fa-search"}))}}]),t}(l.Component);t.a=m},111:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"e",function(){return r}),a.d(t,"f",function(){return o}),a.d(t,"h",function(){return l}),a.d(t,"l",function(){return c}),a.d(t,"g",function(){return m}),a.d(t,"a",function(){return p}),a.d(t,"i",function(){return u}),a.d(t,"k",function(){return d}),a.d(t,"j",function(){return b}),a.d(t,"d",function(){return h}),a.d(t,"c",function(){return _}),a.d(t,"m",function(){return g}),a.d(t,"n",function(){return v}),a.d(t,"o",function(){return f});var i=a(8),n=a(1);function s(e){return{types:["".concat(n.V,"_").concat(n.U),"".concat(n.V,"_").concat(n.H),"".concat(n.V,"_").concat(n.Z)],method:"POST",url:"getProductWithPK/",data:{id:e},payload:{receiveType:"editData"}}}function r(e){var t="POST",a="createRecord";return(e=Object(i.a)({},e,{modelName:"promize_customizer",idKey:"promize_customizer_id"})).promize_customizer_id&&(t="PUT",a="updateRecord"),{types:["".concat(n.V,"_").concat(n.U),"".concat(n.V,"_").concat(n.H),"".concat(n.V,"_").concat(n.Z)],method:t,url:a,data:e,payload:{receiveType:"postData"}}}function o(e){var t="POST",a="createRecord";return(e=Object(i.a)({},e,{modelName:"promize_section",idKey:"promize_section_id"})).promize_section_id&&(t="PUT",a="updateRecord"),{types:["".concat(n.ab,"_").concat(n.U),"".concat(n.ab,"_").concat(n.H),"".concat(n.ab,"_").concat(n.Z)],method:t,url:a,data:e,payload:{receiveType:"postData"}}}function l(e){var t="POST",a="createRecord";return(e=Object(i.a)({},e,{modelName:"promize_tab",idKey:"promize_tab_id"})).promize_tab_id&&(t="PUT",a="updateRecord",delete e.created_date,delete e.updated_date),{types:["".concat(n.gb,"_").concat(n.U),"".concat(n.gb,"_").concat(n.H),"".concat(n.gb,"_").concat(n.Z)],method:t,url:a,data:e,payload:{receiveType:"postData"}}}function c(e){return{types:["".concat(n.gb,"_").concat(n.U),"".concat(n.gb,"_").concat(n.H),"".concat(n.gb,"_").concat(n.Z)],method:"POST",url:"updateBulkRecord",data:e,payload:{receiveType:"editData"}}}function m(e){var t="POST",a="createRecord";return(e=Object(i.a)({},e,{modelName:"promize_sub_tab",idKey:"promize_sub_tab_id"})).promize_sub_tab_id&&(t="PUT",a="updateRecord"),{types:["".concat(n.db,"_").concat(n.U),"".concat(n.db,"_").concat(n.H),"".concat(n.db,"_").concat(n.Z)],method:t,url:a,data:e,payload:{receiveType:"postData"}}}function p(e){return{types:["".concat(n.gb,"_").concat(n.U),"".concat(n.gb,"_").concat(n.H),"".concat(n.gb,"_").concat(n.Z)],method:"DELETE",url:"deleteRecord",data:e,payload:{receiveType:"postData"}}}function u(e){var t="POST",a="createRecord";return(e=Object(i.a)({},e,{modelName:"promize_tab_attribute",idKey:"promize_tab_attribute_id"})).promize_tab_attribute_id&&(t="PUT",a="updateRecord"),{types:["".concat(n.ib,"_").concat(n.U),"".concat(n.ib,"_").concat(n.H),"".concat(n.ib,"_").concat(n.Z)],method:t,url:a,data:e,payload:{receiveType:"postData"}}}function d(e){var t="POST",a="createRecord";return(e=Object(i.a)({},e,{modelName:"promize_tab_attribute_values",idKey:"promize_tab_attribute_values_id"})).promize_tab_attribute_values_id&&(t="PUT",a="updateRecord"),{types:["".concat(n.lb,"_").concat(n.U),"".concat(n.lb,"_").concat(n.H),"".concat(n.lb,"_").concat(n.Z)],method:t,url:a,data:e,payload:{receiveType:"postData"}}}function b(e){var t="POST",a="createRecord";return e[e.idKey]&&(t="PUT",a="updateRecord"),{types:["".concat(n.lb,"_").concat(n.U),"".concat(n.lb,"_").concat(n.H),"".concat(n.lb,"_").concat(n.Z)],method:t,url:a,data:e,payload:{receiveType:"postData"}}}function h(e){return{types:["".concat(n.nb,"_").concat(n.U),"".concat(n.nb,"_").concat(n.H),"".concat(n.nb,"_").concat(n.Z)],method:"POST",url:"linkTabAttributeValues",data:e,payload:{receiveType:"postData"}}}function _(e){return{types:["".concat(n.nb,"_").concat(n.U),"".concat(n.nb,"_").concat(n.H),"".concat(n.nb,"_").concat(n.Z)],method:"POST",url:"createBulkRecord",data:e,payload:{receiveType:"postData"}}}function g(e,t,a){var i=new FormData;return i.append("file",e),i.append("name",t),{types:["".concat(n.J,"_").concat(n.U),"".concat(n.J,"_").concat(n.H),"".concat(n.J,"_").concat(n.Z)],method:"POST",requestBodyType:"FormData",url:"uploadBaseImage",data:i,payload:{receiveType:"postData"}}}function v(e,t){var a=new FormData;return a.append("file",e),a.append("name",t),{types:["".concat(n.J,"_").concat(n.U),"".concat(n.J,"_").concat(n.H),"".concat(n.J,"_").concat(n.Z)],method:"POST",requestBodyType:"FormData",url:"uploadTabImage",data:a,payload:{receiveType:"postData"}}}function f(e,t){var a=new FormData;return a.append("file",e),a.append("name",t),{types:["".concat(n.tb,"_").concat(n.U),"".concat(n.tb,"_").concat(n.H),"".concat(n.tb,"_").concat(n.Z)],method:"POST",requestBodyType:"FormData",url:"uploadTabImage",data:a,payload:{receiveType:"postData"}}}},130:function(e,t,a){"use strict";a.d(t,"b",function(){return O}),a.d(t,"c",function(){return w});var i=a(7),n=a(5),s=a(17),r=a(16),o=a(27),l=a(18),c=a(0),m=a.n(c),p=a(13),u=a.n(p),d=a(19),b=a.n(d),h=a(22),_=a(11),g=(a(4),a(32)),v=a(86),f=a(15),E=a(87),y=a(102),z=a.n(y),N=a(96);function O(){return{fields:{domain_id:f.a.DOMAIN_ID,modelName:"promize_customizer",promize_customizer_id:"",promize_customizer_name:"",status:!0,model_image:[],overlay_image:"",overlay_position:""},inputErrors:{},isEdit:!0}}var w=function(e){return{promize_customizer_name:"required"}},S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(r.a)(t).call(this,e))).closePopup=function(e){e&&e.preventDefault(),a.setState({popup:!1})},a.delete=function(e,t){var i={title:"Remove View",content:"Do you want to remove this view?",submit:function(){a.props.deleteView(t.id)}};a.setState({popup:i})},a.state={views:{view_name:"",image_url:"",file_name:""}},a.handleClickOutside=a.handleClickOutside.bind(Object(o.a)(a)),a}return Object(l.a)(t,e),Object(n.a)(t,[{key:"showAddViewPopup",value:function(e){e.preventDefault(),this.setState({views:{view_name:"",image_url:"",file_name:""}},function(){u()(".promize-modal-cover").show()})}},{key:"hideAddViewPopup",value:function(e){e.preventDefault(),u()(".promize-modal-cover").hide();var t=this.state.views,a=Object.assign({},t,{view_name:"",image_url:"",file_name:""});this.setState({views:a})}},{key:"handleUploadView",value:function(e){e.preventDefault();var t=this.state.views;t.view_name&&t.image_url?(t.id?this.props.updateView(t.id,t):this.props.saveView(t),this.hideAddViewPopup(e)):b.a.error("Add view name and base image")}},{key:"handleViewNameChange",value:function(e){e.preventDefault();var t=this.state.views;t=Object.assign({},t,{view_name:e.target.value}),this.setState({views:t})}},{key:"handleEdit",value:function(e){this.setState({views:e},function(){u()(".promize-modal-cover").show()})}},{key:"componentWillReceiveProps",value:function(e){e.imageUpload.response!==this.props.imageUpload.response&&this.handleUploadedImage(e)}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"handleClickOutside",value:function(e){e.target.classList.contains("btn-popup")||(u()(".portlet-dropdown-menu").removeClass("show"),u()(".portlet-dropdown-menu").addClass("hide"))}},{key:"handleUploadedImage",value:function(e){var t=e.imageUpload.response;if(t.status&&200===t.status){var a=this.state.views,i=Object.assign({},a,{image_url:t.file.path});this.setState({views:i})}}},{key:"openImageOptions",value:function(e,t){e.preventDefault(),u()(".index-"+t).removeClass("hide"),u()(".index-"+t).addClass("show")}},{key:"addView",value:function(){var e=this;return m.a.createElement("div",{className:"promize-modal-cover",style:{display:"none"}},m.a.createElement("div",{className:"promize-modal modal-sm"},m.a.createElement("div",{className:"promize-modal-header"},m.a.createElement("h3",{className:"modal-title"},m.a.createElement("span",null,"Add New View"))),m.a.createElement("div",{className:"promize-modal-body"},m.a.createElement("div",{className:"promize-form-group mt-10"},m.a.createElement(g.a,Object.assign({},this.props,{fieldName:"view_name",value:this.state.views.view_name,labelName:"View Name",onChange:function(t){e.handleViewNameChange(t)},validation:!0}))),m.a.createElement(E.a,Object.assign({},this.props,{labelName:"View Image",fieldName:"image_file",dataName:"image_file",validation:!1,imageType:"base_image",image_url:this.state.views.image_url,header:"View Image",value:this.state.views.file_name}))),m.a.createElement("div",{className:"promize-modal-footer df df-end"},m.a.createElement("button",{className:"btn btn-promize-secondary",onClick:function(t){e.hideAddViewPopup(t)}},"Cancel"),m.a.createElement("button",{className:"btn btn-promize-primary",onClick:function(t){e.handleUploadView(t)}},"Upload"))))}},{key:"displayNoImage",value:function(){return m.a.createElement("div",{className:"promize-no-data"},m.a.createElement("img",{src:z.a}),m.a.createElement("p",{className:"mt-10"},"No Views available"))}},{key:"render",value:function(){var e=this;return m.a.createElement(m.a.Fragment,null,m.a.createElement("form",{onSubmit:this.props.form.handleProductSubmit,method:"POST"},m.a.createElement("div",{className:"promize-card-body"},m.a.createElement("div",{className:"df"},m.a.createElement("div",{className:"wd-30"},m.a.createElement(g.a,Object.assign({},this.props,{fieldName:"promize_customizer_name",value:this.props.state.fields.promize_customizer_name,labelName:"Product Name",validation:!0})))),m.a.createElement("div",{className:"promize-card-header promize-card-innerheader"},m.a.createElement("div",{className:"promize-card-title"},m.a.createElement("h3",null,m.a.createElement("span",null,"Views"))),m.a.createElement("div",{className:"promize-card-action df-end"},m.a.createElement("div",{className:"tab-links"},m.a.createElement("button",{className:"btn btn-links",onClick:function(t){e.showAddViewPopup(t)}},m.a.createElement("i",{className:"fa fa-plus"})," Add View")))),m.a.createElement("div",{className:"promize-tab-option-container"},this.props.state.fields.model_image&&0==this.props.state.fields.model_image.length&&this.displayNoImage(),this.props.state.fields.model_image&&this.props.state.fields.model_image.length>0&&m.a.createElement("ul",{className:"promize-tab-options"},this.props.state.fields.model_image.map(function(t,a){return m.a.createElement("li",{key:a,className:"mr-15 mb-15"},m.a.createElement("div",{className:"promize-tab-options-detail"},m.a.createElement("div",{className:"promize-tab-option-header"},m.a.createElement("p",{className:"tab-option-title"},t.view_name),m.a.createElement("div",{className:"pormize-portlet-dropdown"},m.a.createElement("button",{className:"btn button-dropdown",onClick:function(t){return e.openImageOptions(t,a)}},m.a.createElement("i",{className:"fa fa-ellipsis-v"})),m.a.createElement("div",{className:"portlet-dropdown-menu index-"+a},m.a.createElement("ul",{className:"portlet-menu"},m.a.createElement("li",null,m.a.createElement("button",{type:"button",className:"btn btn-tbl btn-popup",title:"Edit",onClick:function(a){return e.handleEdit(t)}},m.a.createElement("i",{className:"fa fa-pencil-alt"})," Edit")),m.a.createElement("li",null,m.a.createElement("button",{type:"button",className:"btn btn-tbl btn-popup",title:"Delete",onClick:function(a){return e.delete(a,t)}},m.a.createElement("i",{className:"fa fa-trash-alt"})," Delete")))))),m.a.createElement("div",{className:"tab-option-container"},m.a.createElement("img",{src:f.a.APP_IMAGE_BASE_URL+t.image_url}))))})))),m.a.createElement("div",{className:"promize-footer-actions"},m.a.createElement(_.c,{to:"/products",className:"btn btn-promize-secondary"},"Cancel"),m.a.createElement(v.a,{className:"btn btn-promize-primary",text:"Next",response:this.props.product})),this.addView()),this.state.popup&&m.a.createElement(N.a,Object.assign({},this.state.popup,{submitButton:"Remove",cancel:this.closePopup})))}}]),t}(c.Component);t.a=Object(h.b)(function(e){return{imageUpload:e.imageUpload}})(S)},151:function(e,t,a){"use strict";var i=a(9),n=a(41),s=a(8),r=a(7),o=a(5),l=a(17),c=a(16),m=a(27),p=a(18),u=a(0),d=a.n(u),b=a(22),h=a(13),_=a.n(h),g=a(4),v=a.n(g),f=a(19),E=a.n(f),y=a(106),z=a(95),N=a.n(z),O=a(131),w=a(101),S=a(32),T=a(103),j=function(){function e(t){Object(r.a)(this,e),this.canvas=t}return Object(o.a)(e,null,[{key:"getInstance",value:function(t){return new e(t)}}]),Object(o.a)(e,[{key:"setCanvas",value:function(e){this.canvas=e}},{key:"findByName",value:function(e){var t=this.canvas;if(t&&t._objects)return v.a.find(t._objects,["name",e])}},{key:"findById",value:function(e){var t=this.canvas;if(t&&t._objects)return v.a.find(t._objects,["id",e])}}]),e}(),C=a(15),I=a(116),k=a.n(I),D=(a(104),function(e){function t(e){var a,n;Object(r.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={position:{left:0,top:0,width:0,height:0,scaleX:1,scaleY:1,angle:0},fields:"",controlPoints:(a={cornerSize:12,hasControls:!0,borderColor:"#0032cc",cornerColor:"#06f",cornerStyle:"circle",transparentCorners:!1},Object(i.a)(a,"hasControls",!0),Object(i.a)(a,"padding","3"),Object(i.a)(a,"selectable",!0),Object(i.a)(a,"hasRotatingPoint",!1),a),currentView:0,canvas:{},fabricFunction:j.getInstance("")};var s={},o={},p=n.props.state.fields.model_image,u=n.props.setOptionPosition.data.tabAttributeValueData;return p.map(function(e,t){s[e.id]="",o[e.id]=""}),u.option_images&&"string"==typeof u.option_images&&(s=JSON.parse(u.option_images)),u.option_position&&"string"==typeof u.option_position&&(o=JSON.parse(u.option_position)),n.state.optionView=s,n.state.optionViewPosition=o,n.handleInputChange=n.handleInputChange.bind(Object(m.a)(n)),n.addBaseImage=n.addBaseImage.bind(Object(m.a)(n)),n.addOptionImage=n.addOptionImage.bind(Object(m.a)(n)),n.positionChangeCallback=n.positionChangeCallback.bind(Object(m.a)(n)),n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.state.fields.model_image,a=this.state,i=a.currentView,n=a.optionView,s=a.optionViewPosition,r=a.fabricFunction,o=C.a.APP_IMAGE_BASE_URL+t[i].image_url,l=new T.fabric.Canvas("canvas",{selection:!1,controlsAboveOverlay:!0,centeredScaling:!0,allowTouchScrolling:!0}),c=this.positionChangeCallback;l.on("object:modified",function(e){e.target.productimizeType&&"optionImage"==e.target.productimizeType&&c(e.target)}),l.on("object:added",function(e){e.target.productimizeType&&"optionImage"==e.target.productimizeType&&(e.target.animate("opacity",1,{onChange:l.renderAll.bind(l)}),c(e.target))}),r.setCanvas(l),this.setState({canvas:l,fabricFunction:r},function(){e.addBaseImage(o,function(){var a=t[i].id;if(n[a]){var r=e.props.setOptionPosition.data.data.option_images.find(function(e){return n[a]==e.promize_images_id}),o=s[a]||"";e.setOptionImage(C.a.APP_IMAGE_BASE_URL+r.image_url,o)}})})}},{key:"addBaseImage",value:function(e,t){var a=this.state.canvas;a.clear(),T.fabric.Image.fromURL(e,function(e){e.set({selectable:!1}),a.setHeight(e.height),a.setWidth(e.width),e.set({originX:"center",originY:"center",left:e.width/2,top:e.height/2}),a.add(e),a.renderAll(),"function"===typeof t&&t()})}},{key:"addOptionImage",value:function(e){if(this.state.fabricFunction.findByName("optionImage"))E.a.warning("Option Image Aleardy added to this view");else{var t=C.a.APP_IMAGE_BASE_URL+e.image_url,a=this.state,i=a.optionView,n=a.optionViewPosition,r=a.currentView,o=a.position,l=a.controlPoints,c=a.canvas,m=this.props.state.fields.model_image[r];i[m.id]=e.promize_images_id,n[m.id]=o;var p=n[m.id],u=p.scaleX,d=p.scaleY;T.fabric.Image.fromURL(t,function(e){e.set(Object(s.a)({},l,{left:c.width/2,top:c.height/2,scaleX:u,scaleY:d,productimizeType:"optionImage",name:"optionImage",originX:"center",originY:"center",lockUniScaling:!1,opacity:0})),c.add(e),c.renderAll()})}}},{key:"setOptionImage",value:function(e,t){var a=this.state,i=a.canvas,n=a.controlPoints;T.fabric.Image.fromURL(e,function(e){e.set(Object(s.a)({},n,t,{productimizeType:"optionImage",name:"optionImage",originX:"center",originY:"center"})),i.add(e),i.renderAll()})}},{key:"positionChangeCallback",value:function(e){var t=this.state,a=t.fields,i=t.optionViewPosition,n=t.currentView,r=this.props.state.fields.model_image[n].id;i[r]=Object(s.a)({},i[r],{left:e.left,top:e.top,scaleX:e.scaleX,scaleY:e.scaleY,angle:e.angle,width:e.width,height:e.height,lockUniScaling:e.lockUniScaling});var o=e.getBoundingRect();this.setState({fields:Object(s.a)({},a,{x:e.left-o.width/2,y:e.top-o.height/2,width:e.getScaledWidth(),height:e.getScaledHeight(),angle:e.angle,scaleX:e.scaleX,scaleY:e.scaleY}),optionViewPosition:i})}},{key:"lockScaling",value:function(){var e=this,t=this.state.fields;this.setState({fields:Object(s.a)({},t,{lockScaling:!t.lockScaling})},function(){var t=e.state,a=t.canvas,i=t.fabricFunction,n=t.fields;i.findByName("optionImage").set({lockUniScaling:n.lockScaling}),a.renderAll()})}},{key:"handleInputRangeChange",value:function(e,t,a){var i=!1;a&&(i=!0);var n,r=this.state,o=r.fabricFunction,l=r.fields,c=o.findByName("optionImage");"angle"==e&&(n=""!==t?parseInt(t):0,l=Object(s.a)({},l,{angle:n}),this.changeCanvasData({angle:n},c,i),this.setState({fields:Object(s.a)({},l)}))}},{key:"handleInputChange",value:function(e){var t,a,i,n,r,o,l,c=this.state,m=c.fabricFunction,p=c.fields,u=m.findByName("optionImage");if("x_position"===e.target.id){t=""!==e.target.value?parseInt(e.target.value):0,p=Object(s.a)({},p,{x:t});var d=t+u.getBoundingRect().width/2;this.changeCanvasData({left:d},u)}else if("y_position"===e.target.id){a=""!==e.target.value?parseInt(e.target.value):0,p=Object(s.a)({},p,{y:a});var b=a+u.getBoundingRect().height/2;this.changeCanvasData({top:b},u)}else if("width"===e.target.id){var h=u.width;i=(r=""!==e.target.value?parseInt(e.target.value):0)/h,o=p.height,n=p.scaleY;var _=i/p.scaleX;p.lockScaling&&(o=p.height*_,n=p.scaleY*_),p=Object(s.a)({},p,{width:r,height:o,scaleX:i,scaleY:n}),this.changeCanvasData({scaleX:i,scaleY:n},u)}else if("height"===e.target.id){var g=u.height;n=(o=""!==e.target.value?parseInt(e.target.value):0)/g,r=p.width,i=p.scaleX;var v=n/p.scaleY;p.lockScaling&&(r=p.width*v,i=p.scaleX*v),p=Object(s.a)({},p,{width:r,height:o,scaleX:i,scaleY:n}),this.changeCanvasData({scaleX:i,scaleY:n},u)}else"angle"===e.target.id&&(l=""!==e.target.value?parseInt(e.target.value):0,p=Object(s.a)({},p,{angle:l}),this.changeCanvasData({angle:l},u));this.setState({fields:Object(s.a)({},p)})}},{key:"changeCanvasData",value:function(e,t,a){var i=this.state,n=i.currentView,r=i.optionViewPosition,o=i.canvas,l=this.props.state.fields.model_image[n].id;r[l]=Object(s.a)({},r[l],e),t.animate(e,{onChange:o.renderAll.bind(o),onComplete:function(){a&&o.trigger("object:modified",{target:t})}}),t.setCoords()}},{key:"changeView",value:function(e){var t=this;this.setState({currentView:e,fields:""},function(){var a=t.state,i=a.optionView,n=a.optionViewPosition,s=t.props.state.fields.model_image,r=C.a.APP_IMAGE_BASE_URL+s[e].image_url;t.addBaseImage(r,function(){var a=s[e].id,r=t.props.setOptionPosition.data.data.promize_images?t.props.setOptionPosition.data.data.promize_images:t.props.setOptionPosition.data.optionData.option_images;if(i[a]){var o=r?r.find(function(e){return i[a]==e.promize_images_id}):{},l=n[a]||"";t.setOptionImage(C.a.APP_IMAGE_BASE_URL+o.image_url,l)}})})}},{key:"nextView",value:function(){var e=this.state.currentView;e+=1,this.changeView(e)}},{key:"prevView",value:function(){var e=this.state.currentView;e-=1,this.changeView(e)}},{key:"submit",value:function(e){var t=this.state,a=t.optionView,i=t.optionViewPosition;this.props.updateTabAttributeValues({promize_tab_attribute_values_id:this.props.setOptionPosition.data.tabAttributeValueData.promize_tab_attribute_values_id,promize_tab_attribute_id:this.props.setOptionPosition.data.tabAttributeValueData.promize_tab_attribute_id,option_images:JSON.stringify(a),option_position:JSON.stringify(i)}),E.a.success("Option Image Positions Updated"),this.props.closePopup(e)}},{key:"delete",value:function(e){e.preventDefault();var t=this.state,a=t.fabricFunction,i=t.optionView,n=t.optionViewPosition,s=t.currentView,r=t.canvas,o=(t.fields,this.props.state.fields.model_image),l=a.findByName("optionImage");if(l){var c=o[s];i[c.id]="",n[c.id]="",this.setState({optionView:i,optionViewPosition:n,fields:""}),E.a.success("The option image is removed"),r.remove(l)}}},{key:"imageCollection",value:function(){var e=this,t=this.state.optionView,a=Object.values(t);return d.a.createElement("div",{className:"promize-image-collection"},d.a.createElement("div",{className:"promize-img-coll df"},d.a.createElement("div",{className:"promize-img-coll-detail wd-30"},d.a.createElement("div",{className:"promize-img-coll-title mb-10"},"Image Collection"),d.a.createElement("div",{className:"promize-img-coll-subtitle"},"Some sample information about the sample images in followed detailed description,Some sample information about the sample images in followed detailed description.")),d.a.createElement("div",{className:"promize-coll-images-section df df-flow wd-70"},this.props.setOptionPosition.data.data.promize_images&&this.props.setOptionPosition.data.data.option_images.map(function(t,i){var n=-1!=a.indexOf(t.promize_images_id);return d.a.createElement("div",{className:"promize-coll-images-items "+(n?"disabled":""),key:i,onClick:function(a){n?a.preventDefault():e.addOptionImage(t)}},d.a.createElement("img",{src:C.a.APP_IMAGE_BASE_URL+t.image_url}))}))))}},{key:"thumbnail",value:function(){var e=this,t=this.state.currentView,a=this.props.state.fields.model_image;return d.a.createElement("div",{className:"promize-opt-thumb text-center"},a.length>0&&d.a.createElement("div",null,d.a.createElement("ul",null,a.map(function(i,n){return d.a.createElement("li",{key:n,onClick:function(t){return e.changeView(n)},className:"thumb-itm "+(n==t?"current-item":"")},d.a.createElement("img",{src:C.a.APP_IMAGE_BASE_URL+a[n].image_url}),d.a.createElement("p",null,a[n].view_name))}))))}},{key:"deleteButton",value:function(){var e=this;return this.state.fabricFunction.findByName("optionImage")?d.a.createElement("button",{className:"btn btn-promize-secondary",onClick:function(t){return e.delete(t)}},"Delete"):""}},{key:"canvasControls",value:function(){var e=this,t=this.state.fields;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"promize-canvas-xy"},d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"x_position",value:t.x||0,labelName:"X position",validation:!1,inputType:"number",disabled:!t,onChange:this.handleInputChange})),d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"y_position",value:t.y||0,labelName:"Y position",validation:!1,disabled:!t,inputType:"number",onChange:this.handleInputChange}))),d.a.createElement("div",null,d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"angle",value:t.angle||0,labelName:"Angle",validation:!1,disabled:!t,inputType:"number",onChange:this.handleInputChange})),d.a.createElement(k.a,{maxValue:180,minValue:-180,disabled:!t,value:t.angle||0,onChange:function(t){return e.handleInputRangeChange("angle",t)},onChangeComplete:function(t){return e.handleInputRangeChange("angle",t,!0)}})),d.a.createElement("div",{className:"promize-canvas-hw"},d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"width",value:t.width||0,labelName:"Width",validation:!1,inputType:"number",disabled:!t,onChange:this.handleInputChange})),d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"height",value:t.height||0,labelName:"Height",validation:!1,inputType:"number",disabled:!t,onChange:this.handleInputChange})),d.a.createElement("div",{className:"prop-lock-hw"},d.a.createElement("button",{className:"btn-prop-lock "+(t.lockScaling?"locked":""),onClick:function(t){return e.lockScaling()}},d.a.createElement("i",{className:"fa fa-link"})))))}},{key:"render",value:function(){var e=this,t=this.state.currentView,a=this.props.state.fields.model_image;return d.a.createElement("div",{className:"promize-modal-cover-set-postion"},d.a.createElement("div",{className:"promize-modal modal-lg"},d.a.createElement("div",{className:"promize-modal-header"},d.a.createElement("h3",{className:"modal-title"},d.a.createElement("span",null,"Option Position"))),d.a.createElement("div",{className:"promize-modal-body"},d.a.createElement("div",{className:"promize-view-container"},this.thumbnail(),d.a.createElement("div",{className:"promize-option-container"},d.a.createElement("canvas",{id:"canvas"}),d.a.createElement("div",{className:"promize-set-position df df-sp-around mt-20"},this.canvasControls(),this.props.state.fields.model_image.length>1&&d.a.createElement(d.a.Fragment,null,d.a.createElement("button",{className:"promize-slide-icon promize-canvas-prev-btn "+(t<=0?"disabled":""),onClick:function(a){t<=0?a.preventDefault():e.prevView()}},d.a.createElement("i",{className:"fa fa-angle-left"})),d.a.createElement("button",{className:"promize-slide-icon promize-canvas-next-btn "+(t>=a.length-1?"disabled":""),onClick:function(i){t>=a.length?i.preventDefault():e.nextView()}},d.a.createElement("i",{className:"fa fa-angle-right"}))))),d.a.createElement("div",{className:"promize-stp-options"},this.deleteButton())),this.props.setOptionPosition.data.data&&this.imageCollection()),d.a.createElement("div",{className:"promize-modal-footer df df-end"},d.a.createElement("button",{className:"btn btn-promize-secondary",onClick:function(t){e.props.closePopup(t)}},"Cancel"),d.a.createElement("button",{className:"btn btn-promize-primary",onClick:function(t){return e.submit(t)}},"Submit"))))}}]),t}(u.Component)),A=a(87),P=function(e){function t(e){var a,n;Object(r.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={position:{left:0,top:0,width:0,height:0,scaleX:1,scaleY:1,angle:0},fields:"",controlPoints:(a={cornerSize:12,hasControls:!0,borderColor:"#0032cc",cornerColor:"#06f",cornerStyle:"circle",transparentCorners:!1},Object(i.a)(a,"hasControls",!0),Object(i.a)(a,"padding","3"),Object(i.a)(a,"selectable",!0),Object(i.a)(a,"hasRotatingPoint",!1),a),currentView:0,canvas:{},fabricFunction:j.getInstance("")};var s=n.props.state.fields.model_image,o=n.props.setTabPosition.data.tabData,p={},u={};return s.map(function(e,t){p[e.id]="",u[e.id]=""}),o.tab_images&&(p=JSON.parse(o.tab_images)),o.tab_images_position&&(u=JSON.parse(o.tab_images_position)),n.state.tabImages=p,n.state.tabImagesPosition=u,n.handleInputChange=n.handleInputChange.bind(Object(m.a)(n)),n.addBaseImage=n.addBaseImage.bind(Object(m.a)(n)),n.addTabImage=n.addTabImage.bind(Object(m.a)(n)),n.positionChangeCallback=n.positionChangeCallback.bind(Object(m.a)(n)),n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.imageUpload.isFetching||e.imageUpload.isError||this.props.imageUpload.isFetching===e.imageUpload.isFetching||this.handleTabImage(e)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.state.fields.model_image,a=this.state,i=a.currentView,n=a.tabImages,s=a.tabImagesPosition,r=a.fabricFunction,o=C.a.APP_IMAGE_BASE_URL+t[i].image_url,l=new T.fabric.Canvas("canvas",{selection:!1,controlsAboveOverlay:!0,centeredScaling:!0,allowTouchScrolling:!0}),c=this.positionChangeCallback;l.on("object:modified",function(e){e.target.productimizeType&&"tabImage"==e.target.productimizeType&&c(e.target)}),l.on("object:added",function(e){e.target.productimizeType&&"tabImage"==e.target.productimizeType&&(e.target.animate("opacity",1,{onChange:l.renderAll.bind(l)}),c(e.target))}),r.setCanvas(l),this.setState({canvas:l,fabricFunction:r},function(){e.addBaseImage(o,function(){var a=t[i].id;if(n[a]){var r=n[a],o=s[a]||"";e.setTabImage(C.a.APP_IMAGE_BASE_URL+r,o)}})})}},{key:"handleTabImage",value:function(e){e.imageUpload&&e.imageUpload.response&&this.addTabImage(e.imageUpload.response.file.path)}},{key:"addBaseImage",value:function(e,t){var a=this.state.canvas;a.clear(),T.fabric.Image.fromURL(e,function(e){e.set({selectable:!1}),a.setHeight(e.height),a.setWidth(e.width),e.set({originX:"center",originY:"center",left:e.width/2,top:e.height/2}),a.add(e),a.renderAll(),"function"===typeof t&&t()})}},{key:"addTabImage",value:function(e){if(this.state.fabricFunction.findByName("tabImage"))E.a.warning("Tab Image Aleardy added to this view");else{var t=C.a.APP_IMAGE_BASE_URL+e,a=this.state,i=a.tabImages,n=a.tabImagesPosition,r=a.currentView,o=a.position,l=a.controlPoints,c=a.canvas,m=this.props.state.fields.model_image[r];i[m.id]=e,n[m.id]=o;var p=n[m.id],u=p.scaleX,d=p.scaleY;T.fabric.Image.fromURL(t,function(e){e.set(Object(s.a)({},l,{left:c.width/2,top:c.height/2,scaleX:u,scaleY:d,productimizeType:"tabImage",name:"tabImage",originX:"center",originY:"center",lockUniScaling:!1,opacity:0})),c.add(e),c.renderAll()})}}},{key:"setTabImage",value:function(e,t){var a=this.state,i=a.canvas,n=a.controlPoints;T.fabric.Image.fromURL(e,function(e){e.set(Object(s.a)({},n,t,{productimizeType:"tabImage",name:"tabImage",originX:"center",originY:"center"})),i.add(e),i.renderAll()})}},{key:"positionChangeCallback",value:function(e){var t=this.state,a=t.fields,i=t.tabImagesPosition,n=t.currentView,r=this.props.state.fields.model_image[n].id;i[r]=Object(s.a)({},i[r],{left:e.left,top:e.top,scaleX:e.scaleX,scaleY:e.scaleY,angle:e.angle,width:e.width,height:e.height,lockUniScaling:e.lockUniScaling});var o=e.getBoundingRect();this.setState({fields:Object(s.a)({},a,{x:e.left-o.width/2,y:e.top-o.height/2,width:e.getScaledWidth(),height:e.getScaledHeight(),angle:e.angle,scaleX:e.scaleX,scaleY:e.scaleY}),tabImagesPosition:i})}},{key:"lockScaling",value:function(){var e=this,t=this.state.fields;this.setState({fields:Object(s.a)({},t,{lockScaling:!t.lockScaling})},function(){var t=e.state,a=t.canvas,i=t.fabricFunction,n=t.fields;i.findByName("tabImage").set({lockUniScaling:n.lockScaling}),a.renderAll()})}},{key:"handleInputRangeChange",value:function(e,t,a){var i=!1;a&&(i=!0);var n,r=this.state,o=r.fabricFunction,l=r.fields,c=o.findByName("tabImage");"angle"==e&&(n=""!==t?parseInt(t):0,l=Object(s.a)({},l,{angle:n}),this.changeCanvasData({angle:n},c,i),this.setState({fields:Object(s.a)({},l)}))}},{key:"handleInputChange",value:function(e){var t,a,i,n,r,o,l,c=this.state,m=c.fabricFunction,p=c.fields,u=m.findByName("tabImage");if("x_position"===e.target.id){t=""!==e.target.value?parseInt(e.target.value):0,p=Object(s.a)({},p,{x:t});var d=t+u.getBoundingRect().width/2;this.changeCanvasData({left:d},u)}else if("y_position"===e.target.id){a=""!==e.target.value?parseInt(e.target.value):0,p=Object(s.a)({},p,{y:a});var b=a+u.getBoundingRect().height/2;this.changeCanvasData({top:b},u)}else if("width"===e.target.id){var h=u.width;i=(r=""!==e.target.value?parseInt(e.target.value):0)/h,o=p.height,n=p.scaleY;var _=i/p.scaleX;p.lockScaling&&(o=p.height*_,n=p.scaleY*_),p=Object(s.a)({},p,{width:r,height:o,scaleX:i,scaleY:n}),this.changeCanvasData({scaleX:i,scaleY:n},u)}else if("height"===e.target.id){var g=u.height;n=(o=""!==e.target.value?parseInt(e.target.value):0)/g,r=p.width,i=p.scaleX;var v=n/p.scaleY;p.lockScaling&&(r=p.width*v,i=p.scaleX*v),p=Object(s.a)({},p,{width:r,height:o,scaleX:i,scaleY:n}),this.changeCanvasData({scaleX:i,scaleY:n},u)}else"angle"===e.target.id&&(l=""!==e.target.value?parseInt(e.target.value):0,p=Object(s.a)({},p,{angle:l}),this.changeCanvasData({angle:l},u));this.setState({fields:Object(s.a)({},p)})}},{key:"changeCanvasData",value:function(e,t,a){var i=this.state,n=i.currentView,r=i.tabImagesPosition,o=i.canvas,l=this.props.state.fields.model_image[n].id;r[l]=Object(s.a)({},r[l],e),t.animate(e,{onChange:o.renderAll.bind(o),onComplete:function(){a&&o.trigger("object:modified",{target:t})}}),t.setCoords()}},{key:"changeView",value:function(e){var t=this;this.setState({currentView:e,fields:""},function(){var a=t.state,i=a.tabImages,n=a.tabImagesPosition,s=t.props.state.fields.model_image,r=C.a.APP_IMAGE_BASE_URL+s[e].image_url;t.addBaseImage(r,function(){var a=s[e].id;if(i[a]){var r=i[a],o=n[a]||"";t.setTabImage(C.a.APP_IMAGE_BASE_URL+r,o)}})})}},{key:"nextView",value:function(){var e=this.state.currentView;e+=1,this.changeView(e)}},{key:"prevView",value:function(){var e=this.state.currentView;e-=1,this.changeView(e)}},{key:"submit",value:function(e){var t=this.state,a=t.tabImages,i=t.tabImagesPosition;this.props.updateTabImages({promize_tab_id:this.props.setTabPosition.data.tabData.promize_tab_id,tab_images:JSON.stringify(a),tab_images_position:JSON.stringify(i)}),E.a.success("Tab Image Positions Updated"),this.props.closePopup(e)}},{key:"delete",value:function(e){e.preventDefault();var t=this.state,a=t.fabricFunction,i=t.tabImages,n=t.tabImagesPosition,s=t.currentView,r=t.canvas,o=(t.fields,this.props.state.fields.model_image),l=a.findByName("tabImage");if(l){var c=o[s];i[c.id]="",n[c.id]="",this.setState({tabImages:i,tabImagesPosition:n,fields:""}),E.a.success("The tab image is removed"),r.remove(l)}}},{key:"thumbnail",value:function(){var e=this,t=this.state.currentView,a=this.props.state.fields.model_image;return d.a.createElement("div",{className:"promize-opt-thumb text-center"},a.length>0&&d.a.createElement("div",null,d.a.createElement("ul",null,a.map(function(i,n){return d.a.createElement("li",{key:n,onClick:function(t){return e.changeView(n)},className:"thumb-itm "+(n==t?"current-item":"")},d.a.createElement("img",{src:C.a.APP_IMAGE_BASE_URL+a[n].image_url}),d.a.createElement("p",null,a[n].view_name))}))))}},{key:"deleteButton",value:function(){var e=this;if(this.state.fabricFunction.findByName("tabImage"))return d.a.createElement("button",{className:"btn btn-promize-secondary",onClick:function(t){return e.delete(t)}},"delete")}},{key:"canvasControls",value:function(){var e=this,t=this.state.fields;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"promize-canvas-xy"},d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"x_position",value:t.x||0,labelName:"X position",validation:!1,inputType:"number",disabled:!t,onChange:this.handleInputChange})),d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"y_position",value:t.y||0,labelName:"Y position",validation:!1,disabled:!t,inputType:"number",onChange:this.handleInputChange}))),d.a.createElement("div",null,d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"angle",value:t.angle||0,labelName:"Angle",validation:!1,disabled:!t,inputType:"number",onChange:this.handleInputChange})),d.a.createElement(k.a,{maxValue:180,minValue:-180,disabled:!t,value:t.angle||0,onChange:function(t){return e.handleInputRangeChange("angle",t)},onChangeComplete:function(t){return e.handleInputRangeChange("angle",t,!0)}})),d.a.createElement("div",{className:"promize-canvas-hw"},d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"width",value:t.width||0,labelName:"Width",validation:!1,inputType:"number",disabled:!t,onChange:this.handleInputChange})),d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"height",value:t.height||0,labelName:"Height",validation:!1,inputType:"number",disabled:!t,onChange:this.handleInputChange})),d.a.createElement("div",{className:"prop-lock-hw"},d.a.createElement("button",{className:"btn-prop-lock "+(t.lockScaling?"locked":""),onClick:function(t){return e.lockScaling()}},d.a.createElement("i",{className:"fa fa-link"})))))}},{key:"render",value:function(){var e=this,t=this.state.currentView,a=this.props.state.fields.model_image;return d.a.createElement("div",{className:"promize-modal-cover-set-postion"},d.a.createElement("div",{className:"promize-modal modal-lg"},d.a.createElement("div",{className:"promize-modal-header"},d.a.createElement("h3",{className:"modal-title"},d.a.createElement("span",null,"Tab Position"))),d.a.createElement("div",{className:"promize-modal-body"},d.a.createElement("div",{className:"promize-view-container"},this.thumbnail(),d.a.createElement("div",{className:"promize-option-container"},d.a.createElement("canvas",{id:"canvas"}),d.a.createElement("div",{className:"promize-set-position df df-sp-around mt-20"},this.canvasControls(),this.props.state.fields.model_image.length>1&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"promize-slide-icon promize-canvas-prev-btn "+(t<=0?"disabled":""),onClick:function(a){t<=0?a.preventDefault():e.prevView()}},d.a.createElement("i",{className:"fa fa-angle-left"})),d.a.createElement("div",{className:"promize-slide-icon promize-canvas-next-btn "+(t>=a.length-1?"disabled":""),onClick:function(i){t>=a.length?i.preventDefault():e.nextView()}},d.a.createElement("i",{className:"fa fa-angle-right"}))))),d.a.createElement("div",{className:"promize-stp-options"},this.deleteButton())),d.a.createElement("div",{className:"df-js-center mt-20"},d.a.createElement("div",{className:"wd-25"},d.a.createElement("div",{className:"upload-image"},d.a.createElement(A.a,Object.assign({},this.props,{form:this.props.imageForm,labelName:"Tab image",fieldName:"tab_file",dataName:"tab_file",validation:!1,value:"",image_url:""})))))),d.a.createElement("div",{className:"promize-modal-footer df df-end"},d.a.createElement("button",{className:"btn btn-promize-secondary",onClick:function(t){e.props.closePopup(t)}},"Cancel"),d.a.createElement("button",{className:"btn btn-promize-primary",onClick:function(t){return e.submit(t)}},"Submit"))))}}]),t}(u.Component);var F=Object(b.b)(function(e){return{imageUpload:e.imageUpload}})(P),V=function(e){function t(e){var a,n;Object(r.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).positionChangeCallback=function(e){var t=n.state,a=t.fields,i=t.fabricFunction,r=t.currentView,o=t.canvas,l=t.boundaryposition,c=n.props.state.fields.model_image[r].id;a=Object(s.a)({},a,{left:e.left,top:e.top,width:e.getScaledWidth(),height:e.getScaledHeight()}),l[c]=JSON.stringify(a);var m=i.findByName("overlay");if(m){var p=new T.fabric.Rect({left:e.left-m.width/2,top:e.top-m.height/2,width:e.getScaledWidth(),height:e.getScaledHeight(),fill:""});m.set("clipPath",p),o.renderAll(),n.setState({fields:a,boundaryposition:l})}},n.changeView=function(e){var t=n.state,a=t.boundaryposition,i=(t.fields,n.props.state.fields.model_image),s=a[i[e].id],r=C.a.APP_IMAGE_BASE_URL+i[e].image_url;n.setState({currentView:e,fields:""},function(){n.addBaseImage(r,function(){n.addBoundary(r,s)})})},n.handleInputChange=function(e){var t,a,i,r,o=n.state,l=o.fabricFunction,c=o.fields,m=l.findByName("boundaryCtrl");if("left"===e.target.id){t=""!==e.target.value?parseInt(e.target.value):0,c=Object(s.a)({},c,{left:t});var p=t;n.changeCanvasData({left:p},m,!0)}else if("top"===e.target.id){a=""!==e.target.value?parseInt(e.target.value):0,c=Object(s.a)({},c,{top:a});var u=a;n.changeCanvasData({top:u},m,!0)}else"width"===e.target.id?(i=""!==e.target.value?parseInt(e.target.value):0,c=Object(s.a)({},c,{width:i}),n.changeCanvasData({width:i},m,!0)):"height"===e.target.id&&(r=""!==e.target.value?parseInt(e.target.value):0,c=Object(s.a)({},c,{height:r}),n.changeCanvasData({height:r},m,!0));n.setState({fields:Object(s.a)({},c)})},n.state={position:{left:0,top:0,width:10,height:10,scaleX:1,scaleY:1,angle:0},fields:"",controlPoints:(a={cornerSize:12,hasControls:!0,borderColor:"#0032cc",cornerColor:"#06f",cornerStyle:"circle",transparentCorners:!1},Object(i.a)(a,"hasControls",!0),Object(i.a)(a,"padding","3"),Object(i.a)(a,"selectable",!0),Object(i.a)(a,"hasRotatingPoint",!1),a),currentView:0,canvas:{},fabricFunction:j.getInstance("")};var o={};return n.props.state.fields.model_image.map(function(e,t){o[e.id]=""}),n.props.setBoundary.data.tab_attribute.boundary_position&&"string"==typeof n.props.setBoundary.data.tab_attribute.boundary_position&&(o=JSON.parse(n.props.setBoundary.data.tab_attribute.boundary_position)),n.state.boundaryposition=o,n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.state.fields.model_image,a=this.state,i=a.currentView,n=a.fabricFunction,s=a.boundaryposition,r=(C.a.APP_IMAGE_BASE_URL,t[i].image_url,new T.fabric.Canvas("canvas",{selection:!1,controlsAboveOverlay:!0,centeredScaling:!0,allowTouchScrolling:!0})),o=this.positionChangeCallback;r.on("object:moving",function(e){e.target.productimizeType&&"boundary"==e.target.productimizeType&&o(e.target)}).on("object:modified",function(e){e.target.productimizeType&&"boundary"==e.target.productimizeType&&o(e.target)}).on("object:scaling",function(e){e.target.productimizeType&&"boundary"==e.target.productimizeType&&o(e.target)}).on("object:added",function(e){e.target.productimizeType&&"boundary"==e.target.productimizeType&&(e.target.animate("opacity",1,{onChange:r.renderAll.bind(r)}),o(e.target))}),n.setCanvas(r),this.setState({canvas:r,fabricFunction:n},function(){var a=t[i].id,n=s[a],r=C.a.APP_IMAGE_BASE_URL+t[i].image_url;e.addBaseImage(r,function(){e.addBoundary(r,n)})})}},{key:"addBoundary",value:function(e,t){var a=this.state.canvas,i=t?JSON.parse(t):{left:(a.width-100)/2,top:(a.height-100)/2,width:100,height:100},n=new T.fabric.Rect({left:0,top:0,width:a.width,height:a.height,fill:"#777",selectable:!1,opacity:.7});a.add(n),this.addOverlayImage(e,function(){var e=new T.fabric.Rect(Object(s.a)({},i,{fill:"",imageWidth:a.width,imageHeight:a.height,cornerSize:12,hasControls:!0,borderColor:"#0032cc",cornerColor:"#06f",cornerStyle:"circle",transparentCorners:!1,hasRotatingPoint:!1,productimizeType:"boundary",name:"boundaryCtrl"}));a.add(e),a.renderAll()})}},{key:"addOverlayImage",value:function(e,t){var a=this.state.canvas;T.fabric.Image.fromURL(e,function(e){var i=new T.fabric.Rect({left:-50,top:-50,width:100,height:100,fill:""});e.set({originX:"center",originY:"center",left:e.width/2,top:e.height/2,clipPath:i,selectable:!1,name:"overlay"}),a.add(e),a.renderAll(),"function"===typeof t&&t()})}},{key:"addBaseImage",value:function(e,t){var a=this.state.canvas;a.clear(),T.fabric.Image.fromURL(e,function(e){e.set({selectable:!1}),a.setHeight(e.height),a.setWidth(e.width),e.set({originX:"center",originY:"center",left:e.width/2,top:e.height/2}),a.add(e),a.renderAll(),"function"===typeof t&&t()})}},{key:"thumbnail",value:function(){var e=this,t=this.state.currentView,a=this.props.state.fields.model_image;return d.a.createElement("div",{className:"promize-opt-thumb text-center"},a.length>0&&d.a.createElement("div",null,d.a.createElement("ul",null,a.map(function(i,n){return d.a.createElement("li",{key:n,onClick:function(t){return e.changeView(n)},className:"thumb-itm "+(n==t?"current-item":"")},d.a.createElement("img",{src:C.a.APP_IMAGE_BASE_URL+a[n].image_url}),d.a.createElement("p",null,a[n].view_name))}))))}},{key:"changeCanvasData",value:function(e,t,a){var i=this.state,n=i.canvas,r=i.boundaryposition,o=i.currentView,l=this.props.state.fields.model_image[o].id;r[l]=Object(s.a)({},r[l],e),t.set(e),n.trigger("object:modified",{target:t}),t.setCoords()}},{key:"canvasControls",value:function(){var e=this.state.fields;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"promize-canvas-xy"},d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"left",value:e.left||0,labelName:"Left",validation:!1,inputType:"number",disabled:!e,onChange:this.handleInputChange})),d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"top",value:e.top||0,labelName:"Top",validation:!1,disabled:!e,inputType:"number",onChange:this.handleInputChange}))),d.a.createElement("div",null),d.a.createElement("div",{className:"promize-canvas-hw"},d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"width",value:e.width||0,labelName:"Width",validation:!1,inputType:"number",disabled:!e,onChange:this.handleInputChange})),d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"height",value:e.height||0,labelName:"Height",validation:!1,inputType:"number",disabled:!e,onChange:this.handleInputChange}))))}},{key:"deleteButton",value:function(){var e=this;return this.state.fabricFunction.findByName("optionImage")?d.a.createElement("button",{className:"btn btn-promize-primary",onClick:function(t){return e.delete(t)}},"delete"):""}},{key:"nextView",value:function(){var e=this.state.currentView;e+=1,this.changeView(e)}},{key:"prevView",value:function(){var e=this.state.currentView;e-=1,this.changeView(e)}},{key:"submit",value:function(e){var t=this.state,a=(t.fields,t.boundaryposition);"text"==this.props.setBoundary.data.type?this.props.updateTabAttributeValues({promize_tab_text_attribute_values_id:this.props.setBoundary.data.tab_attribute.promize_tab_text_attribute_values_id,boundary_position:JSON.stringify(a),modelName:"promize_tab_text_attribute_values",idKey:"promize_tab_text_attribute_values_id"},"text"):"image"==this.props.setBoundary.data.type?this.props.updateTabAttributeValues({promize_tab_image_attribute_values_id:this.props.setBoundary.data.tab_attribute.promize_tab_image_attribute_values_id,boundary_position:JSON.stringify(a),modelName:"promize_tab_image_attribute_values",idKey:"promize_tab_image_attribute_values_id"},"text"):"clipart"==this.props.setBoundary.data.type&&this.props.updateTabAttributeValues({promize_tab_clipart_attribute_values_id:this.props.setBoundary.data.tab_attribute.promize_tab_clipart_attribute_values_id,boundary_position:JSON.stringify(a),modelName:"promize_tab_clipart_attribute_values",idKey:"promize_tab_clipart_attribute_values_id"},"text"),E.a.success("Boundary / Default View Updated Successfully"),this.props.closePopup(e)}},{key:"render",value:function(){var e=this,t=this.state.currentView,a=this.props.state.fields.model_image;return d.a.createElement("div",{className:"promize-modal-cover-set-postion"},d.a.createElement("div",{className:"promize-modal modal-lg"},d.a.createElement("div",{className:"promize-modal-header"},d.a.createElement("h3",{className:"modal-title"},d.a.createElement("span",null,"Boundary / Default View"))),d.a.createElement("div",{className:"promize-modal-body"},d.a.createElement("div",{className:"promize-view-container"},this.thumbnail(),d.a.createElement("div",{className:"promize-option-container"},d.a.createElement("canvas",{id:"canvas"}),d.a.createElement("div",{className:"promize-set-position df df-sp-around mt-20"},this.canvasControls(),this.props.state.fields.model_image.length>1&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"promize-slide-icon promize-canvas-prev-btn "+(t<=0?"disabled":""),onClick:function(a){t<=0?a.preventDefault():e.prevView()}},d.a.createElement("i",{className:"fa fa-angle-left"})),d.a.createElement("div",{className:"promize-slide-icon promize-canvas-next-btn "+(t>=a.length-1?"disabled":""),onClick:function(i){t>=a.length?i.preventDefault():e.nextView()}},d.a.createElement("i",{className:"fa fa-angle-right"}))))),d.a.createElement("div",null,this.deleteButton()))),d.a.createElement("div",{className:"promize-modal-footer df df-end"},d.a.createElement("button",{className:"btn btn-promize-secondary",onClick:function(t){e.props.closePopup(t)}},"Cancel"),d.a.createElement("button",{className:"btn btn-promize-primary",onClick:function(t){return e.submit(t)}},"Submit"))))}}]),t}(u.Component),x=a(11),B=a(40),R=a(82),U=a(92),L=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={toggle:!1},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.promize_attribute_values,a=this.props.tab_attribute_values?this.props.tab_attribute_values:this.props.tab_attribute_data_values;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"promize-widget-header"},d.a.createElement("h3",{className:"promize-widget-title"},d.a.createElement("div",{className:"promize-widget-sub-title"},d.a.createElement("i",{className:"fa fa-cube"}),d.a.createElement("span",null,d.a.createElement("b",null,this.props.attribute_name)))),d.a.createElement("div",{className:"promize-widget-action df"},d.a.createElement("ul",{className:"df"},d.a.createElement("li",null,d.a.createElement("button",{className:"btn btn-tbl",title:"Delete",onClick:function(t){e.props.deleteAttributeFromTab(t,e.props.promize_attribute_id,e.props.tab_id)}},d.a.createElement("i",{className:"fa fa-trash-alt"})," ",d.a.createElement("span",{class:"promize-btn-description"},"Remove"))))),d.a.createElement("div",{className:"promize-widget-toggle"},d.a.createElement("button",{className:"btn "+(this.state.toggle?"":"toggle"),onClick:function(t){e.setState({toggle:!e.state.toggle})}},d.a.createElement("i",{className:"fa fa-angle-down"})))),this.state.toggle&&d.a.createElement("div",{className:"promize-widget-body bg-grey"}," ",d.a.createElement("table",{className:"promize-table table-options table-action"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Name"),d.a.createElement("th",null,"Code"),d.a.createElement("th",null,"Image"),d.a.createElement("th",null,"Thumbnail"),d.a.createElement("th",null,"SKU"),d.a.createElement("th",null,"Price ($)"),d.a.createElement("th",null,"Actions"))),d.a.createElement("tbody",null,a&&Object.keys(a).length>0&&Object.keys(a).map(function(i,n){var s=a[i],r=t.find(function(e){return e.promize_attribute_values_id==s.promize_attribute_values_id});return r.option_images=[],r.promize_images.map(function(e,t){"option_thubnail_image"==e.image_type||r.option_images.push(e)}),d.a.createElement("tr",{key:n},d.a.createElement("td",null,r.option_name?r.option_name:"-"),d.a.createElement("td",null,r.option_code?r.option_code:"-"),d.a.createElement("td",null,d.a.createElement("div",{className:"promize-tbl-mi-cvr"},d.a.createElement("ul",{className:"promize-milist"},r.promize_images.length>0&&r.promize_images.map(function(e,t){return"option_thubnail_image"==e.image_type?"":d.a.createElement("li",{key:t},e.image_url&&d.a.createElement("img",{src:C.a.APP_IMAGE_BASE_URL+e.image_url,className:"promize-tbl-img",alt:" "}))}),!(r.promize_images.length>0)&&d.a.createElement("li",null,"-")))),d.a.createElement("td",null,d.a.createElement("div",{className:"promize-tbl-mi-cvr"},r.promize_images.map(function(e,t){if("option_thubnail_image"==e.image_type)return e.image_url?d.a.createElement("img",{src:C.a.APP_IMAGE_BASE_URL+e.image_url,className:"promize-tbl-img-sm",alt:" "}):d.a.createElement("div",null,"-")}))),d.a.createElement("td",null,r.option_sku?r.option_sku:"-"),d.a.createElement("td",null,r.option_price?r.option_price:"-"),d.a.createElement("td",null,d.a.createElement("button",{class:"btn btn-tbl",onClick:function(t){e.props.openSetOptionPositionPopup(t,{tabAttributeValueData:s,data:r})}},d.a.createElement("i",{class:"far fa-object-group"}),d.a.createElement("span",{class:"promize-btn-description"},"Option Position"))))})))))}}]),t}(u.Component),X=a(90),Y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={clipartList:{},toggle:!1},a.getAssociatedClipart=a.getAssociatedClipart.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.getAssociatedClipart()}},{key:"getAssociatedClipart",value:function(e){var t=this;this.props.promize_attribute_clipart_values.length>0&&this.props.promize_attribute_clipart_values.map(function(e,a){e.promize_domain_clipart_category_id.split(",").map(function(e,a){t.props.dispatch(Object(X.b)(e))})})}},{key:"componentWillReceiveProps",value:function(e){if(!e.clipart.isFetching&&!e.clipart.isError){var t=e.clipart.response.data,a=this.state.clipartList;a[t.promize_domain_clipart_category_id]=t,this.setState({clipartList:a})}}},{key:"render",value:function(){var e=this,t=this.props.promize_attribute_clipart_values,a=this.props.tab_attribute_values&&!v.a.isEmpty(this.props.tab_attribute_values)?this.props.tab_attribute_values:this.props.tab_attribute_data_values,i=this.state.clipartList,n=this.props.tab_clipart_values;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"promize-widget-header"},d.a.createElement("h3",{className:"promize-widget-title"},d.a.createElement("div",{className:"promize-widget-sub-title"},d.a.createElement("i",{className:"fa fa-grin-hearts"}),d.a.createElement("span",null,d.a.createElement("b",null,this.props.attribute_name)))),d.a.createElement("div",{className:"promize-widget-action df"},d.a.createElement("ul",{className:"df"},d.a.createElement("li",null,d.a.createElement("button",{className:"btn btn-tbl",onClick:function(t){e.props.openSetBoundaryPopup(t,{type:"clipart",tab_attribute_values:a,tab_attribute:n?n[0]:[]})},title:"Set Boundary"},d.a.createElement("i",{className:"fa fa-crosshairs"}),d.a.createElement("span",{class:"promize-btn-description"}," Boundary / Default View"))),d.a.createElement("li",null,d.a.createElement("button",{className:"btn btn-tbl",title:"Delete",onClick:function(t){e.props.deleteAttributeFromTab(t,e.props.promize_attribute_id,e.props.tab_id)}},d.a.createElement("i",{className:"fa fa-trash-alt"}),d.a.createElement("span",{class:"promize-btn-description"},"Remove"))))),d.a.createElement("div",{className:"promize-widget-toggle"},d.a.createElement("button",{className:"btn "+(this.state.toggle?"":"toggle"),onClick:function(t){e.setState({toggle:!e.state.toggle})}},d.a.createElement("i",{className:"fa fa-angle-down"})))),this.state.toggle&&d.a.createElement("div",{className:"promize-widget-body bg-grey"},d.a.createElement("div",{className:"promize-tab-option-container"},d.a.createElement("ul",{className:"promize-clipart-options"},a&&Object.keys(a).length>0&&Object.keys(a).map(function(e,n){var s=a[e];return(s.promize_attribute_clipart_values_id?s:t.find(function(e){return e.promize_attribute_clipart_values_id==s.promize_attribute_values_id})).promize_domain_clipart_category_id.split(",").map(function(e,t){var a=i[e];return a&&a.promize_clipart_category_images.map(function(e,t){var a=e.promize_product_clipart_image;return d.a.createElement("li",null,d.a.createElement("div",{className:"promize-clipart-thumb"},a?d.a.createElement("img",{src:C.a.APP_IMAGE_BASE_URL+a}):d.a.createElement("img",{src:N.a}),d.a.createElement("p",null,e.clipart_name)))})})})))))}}]),t}(u.Component);var H=Object(b.b)(function(e){return{clipart:e.clipart}})(Y),M=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={toggle:!1},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.promize_attribute_image_values,a=this.props.tab_attribute_values&&!v.a.isEmpty(this.props.tab_attribute_values)?this.props.tab_attribute_values:this.props.tab_attribute_data_values,i=this.props.tab_image_values;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"promize-widget-header"},d.a.createElement("h3",{className:"promize-widget-title"},d.a.createElement("div",{className:"promize-widget-sub-title"},d.a.createElement("i",{className:"fa fa-images"}),d.a.createElement("span",null,d.a.createElement("b",null,this.props.attribute_name)))),d.a.createElement("div",{className:"promize-widget-action df"},d.a.createElement("ul",{className:"df"},d.a.createElement("li",null,d.a.createElement("button",{className:"btn btn-tbl",onClick:function(t){e.props.openSetBoundaryPopup(t,{type:"image",tab_attribute_values:a,tab_attribute:i?i[0]:[]})},title:"Set Boundary"},d.a.createElement("i",{className:"fa fa-crosshairs"}),d.a.createElement("span",{class:"promize-btn-description"}," Boundary / Default View"))),d.a.createElement("li",null,d.a.createElement("button",{className:"btn btn-tbl",title:"Delete",onClick:function(t){e.props.deleteAttributeFromTab(t,e.props.promize_attribute_id,e.props.tab_id)}},d.a.createElement("i",{className:"fa fa-trash-alt"}),d.a.createElement("span",{class:"promize-btn-description"},"Remove"))))),d.a.createElement("div",{className:"promize-widget-toggle"},d.a.createElement("button",{className:"btn "+(this.state.toggle?"":"toggle"),onClick:function(t){e.setState({toggle:!e.state.toggle})}},d.a.createElement("i",{className:"fa fa-angle-down"})))),this.state.toggle&&d.a.createElement("div",{className:"promize-widget-body bg-grey"},a&&Object.keys(a).length>0&&Object.keys(a).map(function(e,i){var n=a[e],s=n.promize_attribute_image_values_id?n:t.find(function(e){return e.promize_attribute_image_values_id==n.promize_attribute_values_id});return d.a.createElement("div",{className:"promize-attribute-options"},d.a.createElement("div",null,d.a.createElement("span",null,"Image Name"),d.a.createElement("span",null,":"),d.a.createElement("span",null,s.image_name)),d.a.createElement("div",null,d.a.createElement("span",null,"Image Price"),d.a.createElement("span",null,":"),d.a.createElement("span",{className:"promize-badge badge-primary"},s.image_price?s.image_price:"-")),d.a.createElement("div",null,d.a.createElement("span",null,"Image Sku"),d.a.createElement("span",null,":"),d.a.createElement("span",{className:"promize-badge badge-primary"},s.image_sku?s.image_sku:"-")),d.a.createElement("div",null,d.a.createElement("span",null,"Image Format"),d.a.createElement("span",null,":"),d.a.createElement("span",null,s.image_format)),d.a.createElement("div",null,d.a.createElement("span",null,"Image Max Upload Size"),d.a.createElement("span",null,":"),d.a.createElement("span",null,s.max_upload_size)),d.a.createElement("div",null,d.a.createElement("span",null,"Image Min Upload Size"),d.a.createElement("span",null,":"),d.a.createElement("span",null,s.min_upload_size)))})))}}]),t}(u.Component),W=a(107),J=a(108),G=a(109),q=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={fontSizes:{},fonts:{},fontColors:{},toggle:!1},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch(Object(J.a)()),this.props.dispatch(Object(W.a)()),this.props.dispatch(Object(G.a)())}},{key:"componentWillReceiveProps",value:function(e){if(!e.fonts.isFetching&&!e.fonts.isError){var t=e.fonts.response.data,a={};t.map(function(e,t){a[e.font_id]=e}),this.setState({fonts:a})}if(!e.fontsizes.isFetching&&!e.fontsizes.isError){var i=e.fontsizes.response.data,n={};i.map(function(e,t){n[e.font_size_id]=e}),this.setState({fontSizes:n})}if(!e.fontcolors.isFetching&&!e.fontcolors.isError){var s=e.fontcolors.response.data,r={};s.map(function(e,t){r[e.promize_font_color_id]=e}),this.setState({fontColors:r})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.fonts,i=t.fontSizes,n=t.fontColors,s=this.props.promize_attribute_text_values,r=this.props.tab_attribute_values&&!v.a.isEmpty(this.props.tab_attribute_values)?this.props.tab_attribute_values:this.props.tab_attribute_data_values,o=this.props.tab_text_values;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"promize-widget-header"},d.a.createElement("h3",{className:"promize-widget-title"},d.a.createElement("div",{className:"promize-widget-sub-title"},d.a.createElement("i",{className:"fa fa-font"}),d.a.createElement("span",null,d.a.createElement("b",null,this.props.attribute_name)))),d.a.createElement("div",{className:"promize-widget-action df"},d.a.createElement("ul",{className:"df"},d.a.createElement("li",null,d.a.createElement("button",{className:"btn btn-tbl",onClick:function(t){e.props.openSetBoundaryPopup(t,{type:"text",tab_attribute_values:r,tab_attribute:o?o[0]:[]})},title:"Set Boundary"},d.a.createElement("i",{className:"fa fa-crosshairs"}),d.a.createElement("span",{class:"promize-btn-description"}," Boundary / Default View"))),d.a.createElement("li",null,d.a.createElement("button",{className:"btn btn-tbl",title:"Delete",onClick:function(t){e.props.deleteAttributeFromTab(t,e.props.promize_attribute_id,e.props.tab_id)}},d.a.createElement("i",{className:"fa fa-trash-alt"}),d.a.createElement("span",{class:"promize-btn-description"},"Remove"))))),d.a.createElement("div",{className:"promize-widget-toggle"},d.a.createElement("button",{className:"btn "+(this.state.toggle?"":"toggle"),onClick:function(t){e.setState({toggle:!e.state.toggle})}},d.a.createElement("i",{className:"fa fa-angle-down"})))),this.state.toggle&&d.a.createElement("div",{className:"promize-widget-body bg-grey"},d.a.createElement("div",{className:"promize-tab-option-container"},r&&Object.keys(r).length>0&&Object.keys(r).map(function(e,t){var o=r[e],l=o.promize_attribute_text_values_id?o:s.find(function(e){return e.promize_attribute_text_values_id==o.promize_attribute_values_id}),c=l.font_ids.split(","),m=l.font_size_ids.split(","),p=l.font_color_ids.split(",");return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"df"},d.a.createElement("div",{className:"wd-33"},Object.keys(a).length>0&&l&&d.a.createElement("div",{className:"mb-10"},d.a.createElement("p",{className:"mb-10"},"Default Font"),d.a.createElement("span",{className:"promize-text-highlight-aa"},a[l.default_font_family].font_name)),d.a.createElement("p",{className:"promize-options-title mb-10"},"Fonts"),d.a.createElement("ul",{className:"promize-text-options"},a&&c.map(function(e,t){var i=a[e];return i&&d.a.createElement("li",{className:"promize-text-highlight-aa"},i.font_name)}))),d.a.createElement("div",{className:"wd-33"},Object.keys(i).length>0&&d.a.createElement("div",{className:"mb-10"},d.a.createElement("p",{className:"mb-10"},"Default Font Size"),d.a.createElement("span",{className:"promize-text-highlight-aa"},i[l.default_font_size].font_size)),d.a.createElement("p",{className:"promize-options-title mb-10   "},"Font Sizes"),d.a.createElement("ul",{className:"promize-text-options"},i&&m.map(function(e,t){var a=i[e];return a&&d.a.createElement("li",{className:"promize-text-highlight-aa"},a.font_size)}))),d.a.createElement("div",{className:"wd-33"},Object.keys(n).length>0&&d.a.createElement("div",{className:"mb-10"},d.a.createElement("p",{className:"mb-10"},"Default Font Color"),d.a.createElement("span",{className:"promize-text-highlight-aa"},n[l.default_color].font_color_name)),d.a.createElement("p",{className:"promize-options-title mb-10   "},"Font Colors"),d.a.createElement("ul",{className:"promize-text-options"},n&&p.map(function(e,t){var a=n[e];return a&&d.a.createElement("li",{className:"promize-text-highlight-aa"},a.font_color_name)})))))}))))}}]),t}(u.Component);var K=Object(b.b)(function(e){return{fonts:e.fonts,fontsizes:e.fontsizes,fontcolors:e.fontcolors}})(q),Z=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"classNameCheck",value:function(){var e=this.props.form.validation(this.props.fieldName),t=e?this.props.state.inputErrors[this.props.fieldName].message:"",a="form-group ".concat(e?"feild-wrong":""," ").concat(this.props.value&&!e?"feild-sucess":"");return{className:this.props.validation?a:"form-group",message:t,validation:e}}},{key:"input",value:function(){var e=this.classNameCheck();return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"promize-form-group"},d.a.createElement("label",{htmlFor:this.props.fieldName,className:"promize-form-control-label"},this.props.labelName,this.props.validation&&d.a.createElement("sup",null,"*")),d.a.createElement("textarea",{className:"promize-form-control",type:this.props.inputType?this.props.inputType:"text",id:this.props.fieldName,step:this.props.inputStep?this.props.inputStep:"","data-type":this.props.dataType||"text","data-name":this.props.dataName,placeholder:" ",name:this.props.fieldName,onBlur:this.props.onBlur||this.props.form.blurEventListner,disabled:this.props.disabled,onChange:this.props.onChange||this.props.form.handleFieldsChange,value:this.props.value,"data-validation-name":this.props.labelName,maxLength:this.props.maxLength,rows:"2"}),e.validation&&d.a.createElement("span",{className:"promize-form-error"},"".concat(this.props.labelName," ")+e.message)))}},{key:"render",value:function(){return d.a.createElement(d.a.Fragment,null,this.input())}}]),t}(d.a.Component),$=a(110),Q=function(e){function t(){var e,a;Object(r.a)(this,t);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(n)))).state={toggle:!1,highlight:!1},a.onDragOver=function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy",a.setState({highlight:!0})},a.onDragLeave=function(e){a.setState({highlight:!1})},a.onDrop=function(e,t,i){a.setState({highlight:!1}),a.props.onDrop(e,t,i)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.tabData,i=t.sectIndex,n=t.tabIndex,s=t.subTabIndex,r=t.parentTabData,o=this.state.highlight,l=a.tab_style?JSON.parse(a.tab_style):{display:1,height:50,width:50};return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"promize-dragable-tab-container  mb-20",draggable:!0,onDragStart:function(t){return e.props.onSubTabDragStart(t,a,s)},onDragOver:function(t){return e.props.onSubTabDragOver(t)},onDrop:function(t){e.props.onSubTabDrop(t,s,i,r.promize_tab_id)}},d.a.createElement("div",{className:"promize-widget promize-subtab"},d.a.createElement("div",{className:"promize-widget-header"},d.a.createElement("h3",{className:"promize-widget-title"},a.tab_name),d.a.createElement("div",{className:"promize-widget-action df"},d.a.createElement("ul",{className:"df"},this.props.actionButtons(a,i,n,this.props.parentTabData))),d.a.createElement("div",{className:"promize-widget-toggle"},d.a.createElement("button",{className:"btn "+(this.state.toggle?"":"toggle"),onClick:function(t){e.setState({toggle:!e.state.toggle})}},d.a.createElement("i",{className:"fa fa-angle-down"})))),this.state.toggle&&d.a.createElement("div",{className:"promize-widget-body"},d.a.createElement("div",{className:"df df-wrap"},d.a.createElement("div",{className:"wd-70"},d.a.createElement("div",{className:"df"},d.a.createElement("div",{className:"wd-40"},d.a.createElement("div",{className:"mr-15"},d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"tab_name",value:a.tab_name,labelName:"Tab Name",validation:!1,onBlur:function(t){return e.props.handleFieldBlur(t,"tab_name",n)},onChange:function(t){return e.props.handleFieldChange(t,"tab_name",n)}})))),d.a.createElement("div",{class:"wd-40"},d.a.createElement("div",{class:"mr-15"},d.a.createElement(U.a,{onChangeHandler:function(t){return e.props.handleFieldBlur(t,"default_view",n)},data:this.props.productDetails.model_image?this.props.productDetails.model_image:[],optionText:"view_name",enableEmptyOptionText:!1,value:parseInt(a.default_view),name:"default_view",labelName:"Choose Default View"}))),d.a.createElement("div",{className:"wd-20"},d.a.createElement("div",{className:"mr-15"},d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"tab_layer_no",value:a.tab_layer_no,labelName:"Tab Layer No",validation:!1,onBlur:function(t){return e.props.handleFieldBlur(t,"tab_layer_no",n)},onChange:function(t){return e.props.handleFieldChange(t,"tab_layer_no",n)}})))))),d.a.createElement("div",{className:"wd-30"},d.a.createElement("div",{className:"df"},d.a.createElement("div",{className:"wd-50"},d.a.createElement(R.a,Object.assign({},this.state,{className:"toggle-aa",labelName:"Tab Required",fieldName:"tab_required",dataName:"tab_required",id:"tab_required"+n,value:a.tab_required,spanLabel:{first:"Active",second:"Inactive"},checkValue:{first:!0,second:!1},validation:!1,onChange:function(t){return e.props.handleSwitchChange(t,"tab_required",n)}}))),d.a.createElement("div",{className:"wd-50"},d.a.createElement(R.a,Object.assign({},this.state,{className:"toggle-aa",labelName:"Default Tab",fieldName:"is_default_tab",dataName:"is_default_tab",id:"is_default_tab"+n,value:a.is_default_tab,spanLabel:{first:"Active",second:"Inactive"},checkValue:{first:!0,second:!1},validation:!1,onChange:function(t){return e.props.handleSwitchChange(t,"is_default_tab",n)}}))))),d.a.createElement("div",{class:"wd-100"},d.a.createElement("div",{class:"df"},d.a.createElement("div",{className:"wd-70"},d.a.createElement("div",{className:"mr-15"},d.a.createElement(Z,Object.assign({},this.props,{fieldName:"tab_description",value:a.tab_description,labelName:"Tab Description",validation:!1,onBlur:function(t){return e.props.handleFieldBlur(t,"tab_description",n)},onChange:function(t){return e.props.handleFieldChange(t,"tab_description",n)}})))),d.a.createElement("div",null,d.a.createElement("div",{className:"mr-15"},d.a.createElement(A.a,{callBack:!0,setDate:function(t){e.props.setCurrentTab(t)},data:a.promize_tab_id,labelName:"Tab Thumbnail",fieldName:"tab_thumbnail",dataName:"tab_thumbnail",form:this.props.tabThumbnailImages,validation:!1,imageType:"tab_thumbnail",image_url:a.tab_icon,value:a.tab_icon,type:"icon"})))))),d.a.createElement("div",{className:"wd-100"},d.a.createElement("div",{className:"df bg-grey pd-20"},d.a.createElement("div",{className:""},d.a.createElement("h3",{class:"promize-widget-title"},"Option Display type"),d.a.createElement("p",{class:"promize-sub-content mt-5 mb-20"},"Enter the tab description for the shirt pockete"),d.a.createElement($.a,Object.assign({},this.props,{labelName:" ",fieldName:"tab_style",dataName:"tab_style",value:l.display,checkValue:[{label:"Square",value:1},{label:"Circle",value:2},{label:"Radio",value:3},{label:"Checkbox",value:4},{label:"Select",value:5},{label:"Input",value:6}],validation:!1,onChange:this.props.onChangeHandler,promize_tab_id:n}))),d.a.createElement("div",{class:"promize-display-set"},d.a.createElement("div",{class:"df"},d.a.createElement("div",{class:"wd-50 mr-15"},d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"height",value:l.height,labelName:"Display Height",validation:!1,onBlur:function(t){return e.props.handleStyleFieldBlur(t,"height",n)},onChange:function(t){return e.props.handleStyleFieldChange(t,"height",n)}}))),d.a.createElement("div",{class:"wd-50"},d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"width",value:l.width,labelName:"Display Width",validation:!1,onBlur:function(t){return e.props.handleStyleFieldBlur(t,"width",n)},onChange:function(t){return e.props.handleStyleFieldChange(t,"width",n)}}))))))),d.a.createElement("div",null,d.a.createElement("div",{className:"promize-attr-section mt-15"},d.a.createElement("h3",{className:"promize-attr-title"},"Attributes")),a.tab_attribute&&Object.keys(a.tab_attribute).length>0&&Object.keys(a.tab_attribute).map(function(t,i){var s=a.tab_attribute[t],r=s.promize_attribute_image_values?s.promize_attribute_image_values:"",o=s.promize_attribute_text_values?s.promize_attribute_text_values:"",l=s.promize_attribute_clipart_values?s.promize_attribute_clipart_values:"",c=s.promize_attribute_values?s.promize_attribute_values:"";return d.a.createElement("div",{className:"promize-widget mb-15",key:i},"option"==s.attribute_type&&d.a.createElement(L,Object.assign({default_option:"",tab_attribute_data_values:c},s,e.props,{tab_id:n})),"clipart"==s.attribute_type&&d.a.createElement(H,Object.assign({default_option:"",tab_attribute_data_values:l},s,e.props,{tab_id:n})),"text"==s.attribute_type&&d.a.createElement(K,Object.assign({default_option:"",tab_attribute_data_values:o},s,e.props,{tab_id:n})),"image"==s.attribute_type&&d.a.createElement(M,Object.assign({default_option:"",tab_attribute_data_values:r},s,e.props,{tab_id:n})))})),d.a.createElement("div",{className:"promize-drop-attr "+(o?"promize-highlight":""),onDrop:function(t){e.onDrop(t,i,n)},onDragOver:this.onDragOver,onDragLeave:this.onDragLeave},d.a.createElement("p",null,"Drag and Drop the attribute from the ",d.a.createElement("b",null,"Attributes List")))))))}}]),t}(d.a.Component),ee=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).onDragOver=function(e){e.dataTransfer.dropEffect="copy",a.setState({highlight:!0})},a.onDragLeave=function(e){a.setState({highlight:!1})},a.getTabContent=function(e,t,i,n,s){var r={tabData:e,sectIndex:t,tabIndex:i,parentTabData:n,subTabIndex:s};return d.a.createElement(Q,Object.assign({},a.props,r))},a.state={hightlight:!0,toggle:!1,subTabHide:{}},a.onDrop=a.onDrop.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"onDrop",value:function(e,t,a){this.setState({highlight:!1}),this.props.onDrop(e,t,a)}},{key:"render",value:function(){var e=this,t=this.state.highlight,a=this.props.state.openTab,i=this.props.state.tabs,n=this.props,s=n.tabData,r=n.sectIndex,o=n.tabIndex,l=n.indexVal,c=(s.promize_sub_tabs&&s.promize_sub_tabs.length)>0?s.promize_sub_tabs.sort(function(e,t){return e.sort_id-t.sort_id}):[],m=s.tab_style?JSON.parse(s.tab_style):{display:1,height:50,width:50};return 1==s.is_sub_tab?"":d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"promize-dragable-tab-container mb-20",draggable:!0,onDragStart:function(t){return e.props.onTabDragStart(t,s,l)},onDragOver:function(t){return e.props.onTabDragOver(t,l,r)},onDragLeave:function(t){return e.props.onTabDragEnter(t,l,r)},onDrop:function(t){e.props.onTabDrop(t,l,r)}},d.a.createElement("div",{className:"promize-widget"},d.a.createElement("div",{className:"promize-widget-header"},d.a.createElement("h3",{className:"promize-widget-title"},s.tab_name),d.a.createElement("div",{className:"promize-widget-action"},d.a.createElement("ul",{className:"df"},this.props.actionButtons(s,r,o))),d.a.createElement("div",{className:"promize-widget-toggle"},d.a.createElement("button",{className:parseInt(a.tabIndex)==parseInt(o)&&parseInt(a.sectIndex)==parseInt(r)?"btn":"btn toggle",onClick:function(t){e.props.openTab(t,o,r)}},d.a.createElement("i",{className:"fa fa-angle-down"})))),d.a.createElement("div",{className:parseInt(a.tabIndex)==parseInt(o)&&parseInt(a.sectIndex)==parseInt(r)?"promize-widget-body db":"promize-widget-body dn"},d.a.createElement("div",{className:"df df-wrap"},d.a.createElement("div",{className:"wd-70"},d.a.createElement("div",{className:"df"},d.a.createElement("div",{className:"wd-40"},d.a.createElement("div",{className:"mr-15"},d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"tab_name",value:s.tab_name,labelName:"Tab Name",validation:!1,onBlur:function(t){return e.props.handleFieldBlur(t,"tab_name",o)},onChange:function(t){return e.props.handleFieldChange(t,"tab_name",o)}})))),d.a.createElement("div",{class:"wd-40"},d.a.createElement("div",{class:"mr-15"},d.a.createElement(U.a,{onChangeHandler:function(t){return e.props.handleFieldBlur(t,"default_view",o)},data:this.props.productDetails.model_image?this.props.productDetails.model_image:[],optionText:"view_name",enableEmptyOptionText:!1,value:parseInt(s.default_view),name:"default_view",labelName:"Choose Default View"}))),d.a.createElement("div",{className:"wd-20"},d.a.createElement("div",{className:"mr-15"},d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"tab_layer_no",value:s.tab_layer_no,labelName:"Tab Layer No",validation:!1,onBlur:function(t){return e.props.handleFieldBlur(t,"tab_layer_no",o)},onChange:function(t){return e.props.handleFieldChange(t,"tab_layer_no",o)}})))))),d.a.createElement("div",{className:"wd-30"},d.a.createElement("div",{className:"df"},d.a.createElement("div",{className:"wd-50"},d.a.createElement(R.a,Object.assign({},this.state,{className:"toggle-aa",labelName:"Tab Required",fieldName:"tab_required",dataName:"tab_required",id:"tab_required"+o,value:s.tab_required,spanLabel:{first:"Active",second:"Inactive"},checkValue:{first:!0,second:!1},validation:!1,onChange:function(t){return e.props.handleSwitchChange(t,"tab_required",o)}}))),d.a.createElement("div",{className:"wd-50"},d.a.createElement(R.a,Object.assign({},this.state,{className:"toggle-aa",labelName:"Default Tab",fieldName:"is_default_tab",dataName:"is_default_tab",id:"is_default_tab"+o,value:s.is_default_tab,spanLabel:{first:"Active",second:"Inactive"},checkValue:{first:!0,second:!1},validation:!1,onChange:function(t){return e.props.handleSwitchChange(t,"is_default_tab",o)}}))))),d.a.createElement("div",{class:"wd-100"},d.a.createElement("div",{class:"df"},d.a.createElement("div",{className:"wd-70"},d.a.createElement("div",{className:"mr-15"},d.a.createElement(Z,Object.assign({},this.props,{fieldName:"tab_description",value:s.tab_description,labelName:"Tab Description",validation:!1,onBlur:function(t){return e.props.handleFieldBlur(t,"tab_description",o)},onChange:function(t){return e.props.handleFieldChange(t,"tab_description",o)}})))),d.a.createElement("div",null,d.a.createElement("div",{className:"mr-15"},d.a.createElement(A.a,{callBack:!0,setDate:function(t){e.props.setCurrentTab(t)},data:s.promize_tab_id,labelName:"Tab Thumbnail",fieldName:"tab_thumbnail",dataName:"tab_thumbnail",form:this.props.tabThumbnailImages,validation:!1,imageType:"tab_thumbnail",image_url:s.tab_icon,value:s.tab_icon,type:"icon"})))))),d.a.createElement("div",{className:"wd-100"},d.a.createElement("div",{className:"df bg-grey widget-body pd-20"},d.a.createElement("div",{className:""},d.a.createElement("h3",{class:"promize-widget-title"},"Option Display type"),d.a.createElement("p",{class:"promize-sub-content mt-5 mb-20"},"Enter the tab description for the shirt pockete"),d.a.createElement($.a,Object.assign({},this.props,{labelName:" ",fieldName:"tab_style",dataName:"tab_style",value:m.display,checkValue:[{label:"Square",value:1},{label:"Circle",value:2},{label:"Radio",value:3},{label:"Checkbox",value:4},{label:"Select",value:5},{label:"Input",value:6}],validation:!1,onChange:this.props.onChangeHandler,promize_tab_id:o}))),d.a.createElement("div",{class:"promize-display-set"},d.a.createElement("div",{class:"df"},d.a.createElement("div",{class:"wd-50 mr-15"},d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"height",value:m.height,labelName:"Display Height",validation:!1,onBlur:function(t){return e.props.handleStyleFieldBlur(t,"height",o)},onChange:function(t){return e.props.handleStyleFieldChange(t,"height",o)}}))),d.a.createElement("div",{class:"wd-50"},d.a.createElement(S.a,Object.assign({},this.props,{fieldName:"width",value:m.width,labelName:"Display Width",validation:!1,onBlur:function(t){return e.props.handleStyleFieldBlur(t,"width",o)},onChange:function(t){return e.props.handleStyleFieldChange(t,"width",o)}}))))))),d.a.createElement("div",null,d.a.createElement("div",{className:"promize-attr-section mt-15"},d.a.createElement("h3",{className:"promize-attr-title"},"Attributes")),s.promize_tab_attributes&&Object.keys(s.promize_tab_attributes).length>0&&d.a.createElement(d.a.Fragment,null," ",s.promize_tab_attributes.map(function(t,a){var i=s.tab_attribute[t.promize_tab_attribute_id];if(!i)return!1;var n=i.promize_attribute_image_values?i.promize_attribute_image_values:"",l=i.promize_attribute_text_values?i.promize_attribute_text_values:"",c=i.promize_attribute_clipart_values?i.promize_attribute_clipart_values:"",m=i.promize_attribute_values?i.promize_attribute_values:"";return d.a.createElement("div",{key:a,className:"promize-dragable-tab-container mb-20",draggable:!0,onDragStart:function(t){return e.props.onAttributeDragStart(t,s,a+1)},onDragOver:function(t){return e.props.onAttributeDragOver(t)},onDrop:function(t){e.props.onAttributeDrop(t,a+1,r,o)}},d.a.createElement("div",{className:"promize-widget mb-15"},"option"==i.attribute_type&&d.a.createElement(L,Object.assign({default_option:"",tab_id:o,tab_attribute_data_values:m,deleteAttributeFromTab:e.props.deleteAttributeFromTab},i,e.props)),"clipart"==i.attribute_type&&d.a.createElement(H,Object.assign({default_option:"",deleteAttributeFromTab:e.props.deleteAttributeFromTab,tab_id:o,tab_attribute_data_values:c},i,{tab_clipart_values:t.promize_tab_clipart_attribute_values},e.props)),"text"==i.attribute_type&&d.a.createElement(K,Object.assign({default_option:"",deleteAttributeFromTab:e.props.deleteAttributeFromTab,tab_id:o,tab_attribute_data_values:l},i,{tab_text_values:t.promize_tab_text_attribute_values},e.props)),"image"==i.attribute_type&&d.a.createElement(M,Object.assign({default_option:"",deleteAttributeFromTab:e.props.deleteAttributeFromTab,tab_id:o,tab_attribute_data_values:n},i,{tab_image_values:t.promize_tab_image_attribute_values},e.props))))}))),d.a.createElement("div",{className:"promize-drop-attr "+(t?"promize-highlight":""),onDrop:function(t){e.onDrop(t,r,o)},onDragOver:this.onDragOver,onDragLeave:this.onDragLeave},d.a.createElement("p",null,"Drag and Drop the attribute from ",d.a.createElement("b",null,"Attributes List"))),s.promize_sub_tabs&&s.promize_sub_tabs.length>0&&d.a.createElement("div",{className:"mt-15"},d.a.createElement("div",{className:"promize-attr-section"},d.a.createElement("h3",{className:"promize-attr-title"},"Sub Tabs")),c.map(function(t,a){var n=i[t.child_tab_id];return n&&d.a.createElement("div",{className:"sub-tab-content",key:a},e.getTabContent(n,r,t.child_tab_id,s,a+1))}))))))}}]),t}(u.Component),te=a(111),ae=a(96);a.d(t,"b",function(){return ie});var ie=function(e){return{section_name:"required"}},ne=function(e){function t(e){var a;Object(r.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).setRef=function(e,t){a.sectionRefs[t]=e},a.deleteAttributeFromTab=function(e,t,i){var n={};a.state.tabs;n.title="Remove Attribute",n.content="Do you want to remove this attribute?",n.submit=function(){a.deleteAttributeFromTabFn(e,t,i)},a.setState({popup:n})},a.deleteAttributeFromTabFn=function(e,t,i){e.preventDefault();var n=a.state.tabs,r=0,o=Object(s.a)({},n[parseInt(i)]),l=n[parseInt(i)].promize_tab_attributes||n[parseInt(i)].tab_attribute;l&&l.map(function(e,i){if(e.promize_attribute_id==t){r=e.promize_tab_attribute_id;var n={ids:[e.promize_tab_attribute_id],modelName:"promize_tab_attribute",idKey:"promize_tab_attribute_id"};a.props.dispatch(Object(te.a)(n))}}),r&&delete o.tab_attribute[r],n[parseInt(i)]=o,a.setState({tabs:n})},a.onChangeHandler=function(e){e.preventDefault();var t=a.state.tabs,i=e.target?parseInt(e.target.getAttribute("promize_tab_id")):"";if(i&&t){var n=t[i],r=n.tab_style?JSON.parse(n.tab_style):{display:1,height:50,width:50};r.display=e.target.value?parseInt(e.target.value):1,n=Object(s.a)({},t[i],{tab_style:JSON.stringify(r)}),t[i]=n,a.setState({tabs:t}),a.props.dispatch(Object(te.h)(t[i]))}},a.onDragStart=function(e,t,a){e.dataTransfer.setData("id",t.promize_attribute_id),e.dataTransfer.setData("reorder",a),e.dataTransfer.effectAllowed="copy"},a.onDrop=function(e,t,i){var n=e.dataTransfer.getData("id");null!=i&&null!=t&&a.props.attributes.response.data.map(function(s,r){s.promize_attribute_id==n&&a.addAttributeToTab(e,s,t,i)}),a.setState({highlight:!1})},a.onTabDragStart=function(e,t,a){e.dataTransfer.setData("startIndex",a),e.dataTransfer.setData("key","tab"),e.dataTransfer.effectAllowed="copy"},a.onTabDragEnter=function(e,t,a){e.target.style.background=""},a.onTabDragOver=function(e,t,a){"promize-widget-header"==e.target.getAttribute("class")&&(e.target.style.background="lightblue"),e.dataTransfer.effectAllowed="copy"},a.onTabDrop=function(e,t,i){e.target.style.background="";var n=e.dataTransfer.getData("startIndex"),s=e.dataTransfer.getData("key");if(s&&"tab"==s){var r=[],o=[],l={},c=a.state.tabs;Object.keys(c).map(function(e,t){parseInt(c[e].promize_section_id)==parseInt(i)&&0==c[e].is_sub_tab?r.push(c[e]):o.push(c[e])});var m=r.sort(function(e,t){return e.sort_id-t.sort_id}),p=a.reorderTabInSection(m,parseInt(n),parseInt(t)),u={data:p,obj:{modelName:"promize_tab",idKey:"promize_tab_id"}};a.props.dispatch(Object(te.l)(u)),p.length>0&&p.map(function(e,t){l[e.promize_tab_id]=e}),o.length>0&&o.map(function(e,t){l[e.promize_tab_id]=e}),a.setState({tabs:l})}},a.onSubTabDragStart=function(e,t,a){e.dataTransfer.setData("subTabStartIndex",a),e.dataTransfer.setData("subTabkey","subtab"),e.dataTransfer.effectAllowed="copy"},a.onSubTabDragOver=function(e){e.dataTransfer.dropEffect="copy"},a.onSubTabDrop=function(e,t,i,n){var s=e.dataTransfer.getData("subTabStartIndex"),r=e.dataTransfer.getData("subTabkey"),o="";if(r&&"subtab"==r){var l=a.state.tabs;o=l[n].promize_sub_tabs;var c=a.reorderAttributeInTab(o,parseInt(s),parseInt(t));l[n].promize_sub_tabs=c;var m={data:c,obj:{modelName:"promize_sub_tab",idKey:"promize_sub_tab_id"}};a.props.dispatch(Object(te.l)(m)),a.setState({tabs:[]})}},a.onAttributeDragStart=function(e,t,a){e.dataTransfer.setData("keyval","attribute"),e.dataTransfer.setData("attrStartIndex",a),e.dataTransfer.effectAllowed="copy"},a.onAttributeDragOver=function(e){e.dataTransfer.dropEffect="copy"},a.onAttributeDrop=function(e,t,i,n){var s=e.dataTransfer.getData("attrStartIndex"),r=e.dataTransfer.getData("keyval"),o="";if(r&&"attribute"==r){var l=a.state.tabs;o=l[n].promize_tab_attributes;var c=a.reorderSubTabInTab(o,parseInt(s),parseInt(t));l[n].promize_tab_attributes=c;var m={data:c,obj:{modelName:"promize_tab_attribute",idKey:"promize_tab_attribute_id"}};a.props.dispatch(Object(te.l)(m)),a.setState({tabs:[]})}},a.deleteTabFromsectionFn=function(e,t,i,n){var s={ids:[e],modelName:"promize_tab",idKey:"promize_tab_id"};n[e].is_sub_tab&&n[i.promize_tab_id].promize_sub_tabs&&(n[i.promize_tab_id].promize_sub_tabs=n[i.promize_tab_id].promize_sub_tabs.filter(function(t){return t.child_tab_id!=e})),delete n[e],a.props.dispatch(Object(te.a)(s)),a.setState({tabs:n})},a.handleStyleFieldBlur=function(e,t,i){e.preventDefault();var n=a.state.tabs;if(n[i]){var r=n[i],o=r.tab_style?JSON.parse(r.tab_style):{display:1,height:50,width:50};o[t]=e.target.value?parseInt(e.target.value):null,r=Object(s.a)({},n[i],{tab_style:JSON.stringify(o)}),n[i]=r,a.props.dispatch(Object(te.h)(n[i]))}},a.handleStyleFieldChange=function(e,t,i){e.preventDefault();var n=a.state.tabs;if(n[i]){var r=n[i],o=r.tab_style?JSON.parse(r.tab_style):{display:1,height:50,width:50};o[t]=e.target.value?parseInt(e.target.value):null,r=Object(s.a)({},n[i],{tab_style:JSON.stringify(o)}),n[i]=r,a.setState({tabs:n})}},a.editSection=function(e,t){var i=a.sectionRefs[t].getBoundingClientRect().x||0,n=a.refs.sectionWrapper.getBoundingClientRect().x||0,s=a.state.sections[e],r=i-n;a.setState({editSection:{show:!0,data:{section_id:e,section:s,x:r}}})},a.sectionEdit=function(e){var t=a.state.editSection,i=t.data.section;t.data.section=Object(s.a)({},i,{section_name:e.target.value||""}),a.setState({editSection:Object(s.a)({},t)})},a.saveSectionEdit=function(e,t){E.a.success("Section Name Updated"),a.props.dispatch(Object(te.f)({promize_section_id:t.data.section.promize_section_id,section_name:t.data.section.section_name})),a.setState({editSection:{show:!1}})},a.sectionDelete=function(e,t){var i={title:"Remove Section",content:"Do you want to remove this section?",submit:function(){a.sectionDeletefn(e,t)}};a.setState({popup:i})},a.sectionDeletefn=function(e,t){var i=a.state.sections,n=t.data.section.promize_section_id,s={ids:[n],modelName:"promize_section",idKey:"promize_section_id"};delete i[n],a.props.dispatch(Object(te.a)(s));var r=Object.keys(i)[0];a.setState({sections:i,activeSectionId:r,editSection:{show:!1}})},a.state={popup:!1,editSection:{show:!1,data:{}},tab_attribute:{},tab_attribute_values:{},tab:{tab_name:"New Tab",tab_description:"",tab_images:"",tab_images_position:"",tab_layer_no:0,tab_required:0,overlay_image:"",overlay_position:"",image_color_settings:"",tab_thumbnail:"",tab_style:JSON.stringify({display:1,height:50,width:50}),sort_id:0,default_view:0,is_default_tab:0,promize_attribute_values:[],tab_attributes:[],default_option:"",is_sub_tab:0,status:1},selectedTabs:[],selectedSubTabs:[],openTab:{sectIndex:"",tabIndex:""},subTabIndex:{sectIndex:"",tabIndex:""},setOptionPosition:{show:!1,data:{}},setTabPosition:{show:!1,data:{}},setBoundary:{show:!1,data:{}},currnetTabId:"",searchText:"",activeSectionId:"",highlight:!1,parentTabId:""},a.tabImages=B.a.getInstance(Object(m.a)(a),{},{},function(e){a.props.dispatch(Object(te.n)(e,"tab_image","imageUpload"))},{}),a.tabThumbnailImages=B.a.getInstance(Object(m.a)(a),{},{},function(e){a.props.dispatch(Object(te.o)(e,"tab_image","imageUpload"))},{}),a.section=B.a.getInstance(Object(m.a)(a),{},function(e){console.log("alert")},{},{}),a.sectionRefs={};var i={},n={};return a.props.productDetails&&a.props.productDetails.promize_sections&&a.props.productDetails.promize_sections.map(function(e,t){i[e.promize_section_id]=Object(s.a)({},e),e.promize_tabs.map(function(e,t){n[e.promize_tab_id]=e,n[e.promize_tab_id].tab_attribute={},e.promize_tab_attributes.map(function(t,a){if(n[e.promize_tab_id].tab_attribute[t.promize_tab_attribute_id]=t.promize_attribute,t.promize_attribute){var i=t.promize_attribute;t.promize_tab_attribute_values?(i.tab_attribute_values={},t.promize_tab_attribute_values.map(function(e){i.tab_attribute_values[e.promize_tab_attribute_values_id]=e})):t.promize_tab_text_attribute_values?(i.tab_text_attribute_values={},t.promize_tab_text_attribute_values.map(function(e){i.tab_text_attribute_values[e.promize_tab_text_attribute_values_id]=e})):t.promize_tab_image_attribute_values&&(i.tab_image_attribute_values={},t.promize_tab_image_attribute_values.map(function(e){i.tab_image_attribute_values[e.promize_tab_image_attribute_values_id]=e})),n[e.promize_tab_id].tab_attribute[t.promize_tab_attribute_id]=i}})})}),a.state.sections=i,a.state.tabs=n,a.onDrop=a.onDrop.bind(Object(m.a)(a)),a.onDragStart=a.onDragStart.bind(Object(m.a)(a)),a.openSetOptionPositionPopup=a.openSetOptionPositionPopup.bind(Object(m.a)(a)),a.openSetBoundaryPopup=a.openSetBoundaryPopup.bind(Object(m.a)(a)),a.closePopup=a.closePopup.bind(Object(m.a)(a)),a.createTab=a.createTab.bind(Object(m.a)(a)),a.addAttributeToTab=a.addAttributeToTab.bind(Object(m.a)(a)),a.saveSectionToState=a.saveSectionToState.bind(Object(m.a)(a)),a.saveTabToState=a.saveTabToState.bind(Object(m.a)(a)),a.saveTabAttributeToState=a.saveTabAttributeToState.bind(Object(m.a)(a)),a.handleFieldChange=a.handleFieldChange.bind(Object(m.a)(a)),a.handleSwitchChange=a.handleSwitchChange.bind(Object(m.a)(a)),a.handleFieldBlur=a.handleFieldBlur.bind(Object(m.a)(a)),a.saveTabAttributeValuesList=a.saveTabAttributeValuesList.bind(Object(m.a)(a)),a.updateTabAttributeValues=a.updateTabAttributeValues.bind(Object(m.a)(a)),a.updateTabImages=a.updateTabImages.bind(Object(m.a)(a)),a.setCurrentTab=a.setCurrentTab.bind(Object(m.a)(a)),a.actionButtons=a.actionButtons.bind(Object(m.a)(a)),a.saveTabAttributeValues=a.saveTabAttributeValues.bind(Object(m.a)(a)),a.openTab=a.openTab.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.dispatch(Object(y.d)()),this.props.new&&this.props.dispatch(Object(te.f)({promize_customizer_id:this.props.state.fields.promize_customizer_id,section_name:this.props.state.fields.promize_customizer_name,sort_id:1}))}},{key:"componentDidMount",value:function(){var e=this.refs,t=e.sectionContainer,a=e.sectionAddBtn;if(t&&a){var i=t.getBoundingClientRect(),n=a.getBoundingClientRect(),s=i.width-n.width;this.setState({sectionWrapperWidth:s})}}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.parentTabId;if(e.section.isFetching||e.section.isError||this.props.section.isFetching==e.section.isFetching||this.saveSectionToState(e.section.response.records,e.section),e.tab&&e.tab.response!==this.props.tab.response&&"POST"==e.tab.method&&!e.tab.isFetching&&!e.tab.isError&&this.props.tab.isFetching!=e.tab.isFetching){if(a){var i={parent_tab_id:a,child_tab_id:e.tab.response.records.promize_tab_id};this.setState({parentTabId:""},function(){t.props.dispatch(Object(te.g)(i))})}this.saveTabToState(e.tab.response.records)}!e.tab||e.tab.isFetching||e.tab.isError||this.props.tab.isFetching==e.tab.isFetching||this.saveTabToState(e.tab.response.records),!e.subTab||e.subTab.isFetching||e.subTab.isError||this.props.subTab.isFetching==e.subTab.isFetching||this.saveSubTabToState(e.subTab.response.records),!e.tabAttribute||e.tabAttribute.isFetching||e.tabAttribute.isError||this.props.tabAttribute.isFetching==e.tabAttribute.isFetching||this.saveTabAttributeToState(e.tabAttribute.response.records),!e.tabAttributevalueslist||e.tabAttributevalueslist.isFetching||e.tabAttributevalueslist.isError||this.props.tabAttributevalueslist.isFetching==e.tabAttributevalueslist.isFetching||this.saveTabAttributeValuesList(e.tabAttributevalueslist.response.records),!e.tabAttributevalues||e.tabAttributevalues.isFetching||e.tabAttributevalues.isError||this.props.tabAttributevalues.isFetching==e.tabAttributevalues.isFetching||this.saveTabAttributeValues(e.tabAttributevalues.response.records),!e.tabThumbnailImage||e.tabThumbnailImage.isFetching||e.tabThumbnailImage.isError||this.props.tabThumbnailImage.isFetching==e.tabThumbnailImage.isFetching||this.saveTabImage(e.tabThumbnailImage.response.file)}},{key:"saveSectionToState",value:function(e,t){var a=this,i=this.state.sections;if(e){var n=i[e.promize_section_id]||{};i[e.promize_section_id]=Object(s.a)({},n,e)}this.setState({sections:i,activeSectionId:e.promize_section_id},function(){t.method&&"POST"==t.method&&a.createTab({},e.promize_section_id)})}},{key:"saveTabToState",value:function(e){var t=this.state.tabs;if(e){var a=t[e.promize_tab_id]||{};t[e.promize_tab_id]=Object(s.a)({},a,e)}this.setState({tabs:t})}},{key:"saveSubTabToState",value:function(e){var t=this.state.tabs;if(e){var a=t[e.parent_tab_id]||{};void 0==a.promize_sub_tabs&&(a.promize_sub_tabs=[]),a.promize_sub_tabs.push(e),t[e.parent_tab_id]=Object(s.a)({},a)}this.setState({tabs:t})}},{key:"saveTabAttributeToState",value:function(e){var t=this,a=this.state.tabs;if(e&&e.promize_tab_attribute_id&&e.promize_tab_id){var i=a[e.promize_tab_id]||{};i.promize_tab_attributes=i.promize_tab_attributes||[],i.tab_attribute=i.tab_attribute||{};var n=this.props.attributes.response.data.find(function(t){return t.promize_attribute_id===e.promize_attribute_id});i.tab_attribute[e.promize_tab_attribute_id]=Object(s.a)({},e,n),i.promize_tab_attributes.push(i.tab_attribute[e.promize_tab_attribute_id]),a[e.promize_tab_id]=i,this.setState({tabs:a},function(){var a=[],i=t.props.attributes.response.data.find(function(t){return t.promize_attribute_id===e.promize_attribute_id});if(i.promize_attribute_values.length>0)i.promize_attribute_values.map(function(t,i){a.push({promize_tab_attribute_id:parseInt(e.promize_tab_attribute_id),promize_attribute_values_id:t.promize_attribute_values_id})}),a.length>0&&t.props.dispatch(Object(te.d)(a));else if(i.promize_attribute_clipart_values.length>0){i.promize_attribute_clipart_values.map(function(t,i){a.push({promize_tab_attribute_id:parseInt(e.promize_tab_attribute_id),promize_attribute_values_id:t.promize_attribute_clipart_values_id})});var n={data:a,obj:{modelName:"promize_tab_clipart_attribute_values"}};a.length>0&&t.props.dispatch(Object(te.c)(n))}else if(i.promize_attribute_image_values.length>0){i.promize_attribute_image_values.map(function(t,i){a.push({promize_tab_attribute_id:parseInt(e.promize_tab_attribute_id),promize_attribute_values_id:t.promize_attribute_image_values_id})});var s={data:a,obj:{modelName:"promize_tab_image_attribute_values"}};a.length>0&&t.props.dispatch(Object(te.c)(s))}else if(i.promize_attribute_text_values.length>0){i.promize_attribute_text_values.map(function(t,i){a.push({promize_tab_attribute_id:parseInt(e.promize_tab_attribute_id),promize_attribute_values_id:t.promize_attribute_text_values_id})});var r={data:a,obj:{modelName:"promize_tab_text_attribute_values"}};a.length>0&&t.props.dispatch(Object(te.c)(r))}})}}},{key:"saveTabAttributeValuesList",value:function(e){var t=this,a=this.state.tabs;if(e){var i=e[0].promize_tab_attribute_id;Object.keys(a).map(function(n,r){if(a[n].tab_attribute&&a[n].tab_attribute[i]){var o=a[n].tab_attribute[i]||{};e.map(function(e,t){o.tab_attribute_values=o.tab_attribute_values||{},e.promize_tab_attribute_values_id?o.tab_attribute_values[e.promize_tab_attribute_values_id]=Object(s.a)({},e):e.promize_tab_clipart_attribute_values_id?o.tab_attribute_values[e.promize_tab_clipart_attribute_values_id]=Object(s.a)({},e):e.promize_tab_image_attribute_values_id?o.tab_attribute_values[e.promize_tab_image_attribute_values_id]=Object(s.a)({},e):e.promize_tab_text_attribute_values_id&&(o.tab_attribute_values[e.promize_tab_text_attribute_values_id]=Object(s.a)({},e))}),a[n].tab_attribute[i]=o,t.setState({tabs:a})}})}}},{key:"saveTabAttributeValues",value:function(e){var t=this,a=this.state.tabs;Object.keys(a).map(function(i,n){if(e.promize_tab_attribute_values_id&&a[i].tab_attribute[e.promize_tab_attribute_id]){var r=a[i].tab_attribute[e.promize_tab_attribute_id]||{};r.tab_attribute_values=r.tab_attribute_values||{},e.promize_tab_attribute_values_id&&(r.tab_attribute_values[e.promize_tab_attribute_values_id]=Object(s.a)({},e)),a[i].tab_attribute[e.promize_tab_attribute_id]=r,t.setState({tabs:a})}else if(e.promize_tab_text_attribute_values_id){var o=a[i].promize_tab_attributes||[];o.length>0&&o.map(function(t,a){var i=t.promize_tab_text_attribute_values||[];i.length>0&&i.map(function(t,a){t.promize_tab_text_attribute_values_id==e.promize_tab_text_attribute_values_id&&(i[a]=Object(s.a)({},e))}),o[a].promize_attribute_text_values=i}),a[i].promize_tab_attributes=o,t.setState({tabs:a})}else if(e.promize_tab_image_attribute_values_id){var l=a[i].promize_tab_attributes||[];l.length>0&&l.map(function(t,a){var i=t.promize_tab_image_attribute_values||[];i.length>0&&i.map(function(t,a){t.promize_tab_image_attribute_values_id==e.promize_tab_image_attribute_values_id&&(i[a]=Object(s.a)({},e))}),l[a].promize_tab_image_attribute_values=i}),a[i].promize_tab_attributes=l,t.setState({tabs:a})}else if(e.promize_tab_clipart_attribute_values_id){var c=a[i].promize_tab_attributes||[];c.length>0&&c.map(function(t,a){var i=t.promize_tab_clipart_attribute_values||[];i.length>0&&i.map(function(t,a){t.promize_tab_clipart_attribute_values_id==e.promize_tab_clipart_attribute_values_id&&(i[a]=Object(s.a)({},e))}),c[a].promize_tab_clipart_attribute_values=i}),a[i].promize_tab_attributes=c,t.setState({tabs:a})}})}},{key:"saveTabImage",value:function(e){var t=this.state,a=t.currnetTabId,i=t.tabs;a&&i[a]&&this.props.dispatch(Object(te.h)({promize_tab_id:i[a].promize_tab_id,tab_icon:e.path})),this.setState({currnetTabId:""})}},{key:"createTab",value:function(e,t){var a=this.state.tab;this.props.dispatch(Object(te.h)(Object(s.a)({},a,{promize_section_id:t})))}},{key:"addSection",value:function(){this.setState({editSection:{show:!1}}),this.props.dispatch(Object(te.f)({promize_customizer_id:this.props.state.fields.promize_customizer_id,section_name:"Section Name",sort_id:1}))}},{key:"updateTabAttributeValues",value:function(e,t){"text"==t?this.props.dispatch(Object(te.j)(Object(s.a)({},e))):this.props.dispatch(Object(te.k)(Object(s.a)({},e)))}},{key:"updateTabImages",value:function(e){var t=this.state.tabs;e&&t&&(t[e.promize_tab_id]=Object(s.a)({},t[e.promize_tab_id],e),this.setState({tabs:t}),this.props.dispatch(Object(te.h)(Object(s.a)({},e))))}},{key:"addTabToSection",value:function(e,t,a){e.preventDefault();var i=this.state.sections;void 0==i[a].tabs&&(i[a].tabs=[]);var n=i[a].tabs;n.push(t),i[a].tabs=n,this.setState({sections:i})}},{key:"addAttributeToTab",value:function(e,t,a,i){e.preventDefault(),this.props.dispatch(Object(te.i)({promize_tab_id:i,promize_attribute_id:t.promize_attribute_id,sort_id:1}))}},{key:"addSubTabToTab",value:function(e){e.preventDefault();var t=this.state.subTabIndex.sectIndex,a=this.state.subTabIndex.tabIndex,i=this.state.sections,n=this.state.selectedSubTabs;void 0==i[t].tabs[a].sub_tabs&&(i[t].tabs[a].sub_tabs=[]);var s=i[t].tabs[a].sub_tabs;this.props.attributes.response.data.map(function(e,t){n.includes(e.promize_attribute_id)&&s.push(e)}),i[t].tabs[a].sub_tabs=s,this.setState({sections:i,selectedSubTabs:[]}),this.closeTabSelectionPopup(e)}},{key:"reorderTabInSection",value:function(e,t,a){var i=Array.from(e);i=i.filter(function(e){return 1!==e.is_sub_tab});var s=0,r=i.splice(t-1,1),o=Object(n.a)(r,1)[0];return i.splice(a-1,0,o),i.map(function(e,t){delete e.created_date,delete e.updated_date,1!=e.is_sub_tab&&(s+=1,e.sort_id=s)}),i}},{key:"reorderSubTabInTab",value:function(e,t,a){var i=Array.from(e),s=0,r=i.splice(t-1,1),o=Object(n.a)(r,1)[0];return i.splice(a-1,0,o),i.map(function(e,t){delete e.created_date,delete e.updated_date,s+=1,e.sort_id=s}),i}},{key:"reorderAttributeInTab",value:function(e,t,a){var i=Array.from(e),s=0,r=i.splice(t-1,1),o=Object(n.a)(r,1)[0];return i.splice(a-1,0,o),i.map(function(e,t){delete e.created_date,delete e.updated_date,e.sort_id=s,s+=1}),i}},{key:"deleteTabFromsection",value:function(e,t,a){var i=this,n={},s=this.state.tabs;n.title="Remove Tab",n.content="Do you want to remove this tab?",n.submit=function(n){i.deleteTabFromsectionFn(e,t,a,s)},this.setState({popup:n})}},{key:"openTab",value:function(e,t,a){var i=this.state.openTab;parseInt(i.tabIndex)!==parseInt(t)?(i.sectIndex=parseInt(a),i.tabIndex=parseInt(t)):(i.sectIndex="",i.tabIndex=""),this.setState({openTab:i})}},{key:"openTabSelectionPopup",value:function(e,t,a,i){var n=this,r=this.state.tab;e.preventDefault();var o=Object(s.a)({},r,{is_sub_tab:1,promize_section_id:parseInt(t.sectIndex)});this.setState({parentTabId:parseInt(t.tabIndex)},function(){n.props.dispatch(Object(te.h)(o))})}},{key:"closeTabSelectionPopup",value:function(e){e.preventDefault(),_()(".promize-modal-cover-tab-selection").hide()}},{key:"selectedSubtab",value:function(e){e.preventDefault();var t=this.state.selectedSubTabs;t.push(parseInt(e.target.id)),this.setState({selectedSubTabs:t})}},{key:"openSetTabPositionPopup",value:function(e,t){e.preventDefault(),this.setState({setTabPosition:{show:!0,data:Object(s.a)({},t)}})}},{key:"openSetBoundaryPopup",value:function(e,t){e.preventDefault(),this.setState({setBoundary:{show:!0,data:Object(s.a)({},t)}})}},{key:"openSetOptionPositionPopup",value:function(e,t){e.preventDefault();var a=this.state.setOptionPosition;this.setState({setOptionPosition:Object(s.a)({},a,{show:!0,data:Object(s.a)({},t)})})}},{key:"closePopup",value:function(e){e&&e.preventDefault(),this.setState({setOptionPosition:{show:!1,data:{}},setTabPosition:{show:!1,data:{}},setBoundary:{show:!1,data:{}},popup:!1})}},{key:"handleFieldBlur",value:function(e,t,a){e.preventDefault();var n=this.state.tabs;n[a]&&this.props.dispatch(Object(te.h)(Object(i.a)({promize_tab_id:n[a].promize_tab_id},t,e.target.value)))}},{key:"handleFieldChange",value:function(e,t,a){e.preventDefault();var i=this.state.tabs;i[a]&&(i[a][t]=e.target.value,this.setState({tabs:i}))}},{key:"handleSwitchChange",value:function(e,t,a){var n=this,s=this.state.tabs,r=!1;e.target.checked&&(r=!0);var o=r?1:0;s[a]&&(s[a][t]=r,this.setState({tabs:s},function(){n.props.dispatch(Object(te.h)(Object(i.a)({promize_tab_id:s[a].promize_tab_id},t,o)))}))}},{key:"actionButtons",value:function(e,t,a,i){var n=this;return d.a.createElement(d.a.Fragment,null,!i&&d.a.createElement("li",null,d.a.createElement("button",{className:"btn btn-tbl",onClick:function(i){n.openTabSelectionPopup(i,{tabData:e,sectIndex:t,tabIndex:a})},title:"Add Subtab"},d.a.createElement("i",{className:"fa fa-folder-open"}),d.a.createElement("span",{class:"promize-btn-description"},"Add Sub-Tab"))),d.a.createElement("li",null,d.a.createElement("button",{className:"btn btn-tbl",onClick:function(i){n.openSetTabPositionPopup(i,{tabData:e,sectIndex:t,tabIndex:a})},title:"Set Tab Position"},d.a.createElement("i",{className:"fa fa-image"}),d.a.createElement("span",{class:"promize-btn-description"},"Tab Image"))),d.a.createElement("li",null,d.a.createElement("button",{className:"btn btn-tbl",onClick:function(e){n.deleteTabFromsection(parseInt(a),parseInt(t),i)},title:"Delete"},d.a.createElement("i",{className:"fa fa-trash-alt"}),d.a.createElement("span",{class:"promize-btn-description"},"Remove"))))}},{key:"tabSelectionPopup",value:function(){var e=this;return d.a.createElement("div",{className:"promize-modal-cover-tab-selection",style:{display:"none"}},d.a.createElement("div",{className:"promize-modal modal-sm"},d.a.createElement("div",{className:"promize-modal-header"},d.a.createElement("h3",{className:"modal-title"},d.a.createElement("span",null,"Select Sub-Tabs"))),d.a.createElement("div",{className:"promize-modal-body"},d.a.createElement("div",{className:"promize-options"},d.a.createElement(w.a,null),d.a.createElement("div",{className:"promize-dragable-container"},void 0!=this.props.attributes.response.data&&d.a.createElement(O.a,Object.assign({},this.props,{currentComponent:this,dataList:this.props.attributes.response.data,fieldName:"TabList",value:this.state.selectedSubTabs,onChangeHandler:this.selectedSubtab,labelName:" "}))))),d.a.createElement("div",{className:"promize-modal-footer df df-end"},d.a.createElement("button",{className:"btn btn-promize-secondary",onClick:function(t){e.closeTabSelectionPopup(t)}},"Cancel"),d.a.createElement("button",{className:"btn btn-promize-primary",onClick:function(t){e.addSubTabToTab(t)}},"Submit"))))}},{key:"setCurrentTab",value:function(e){this.setState({currnetTabId:e})}},{key:"addSelectedtab",value:function(e,t,a,i){return 1==e.is_sub_tab?"":d.a.createElement(ee,Object.assign({key:a},this.props,{indexVal:i,onDrop:this.onDrop,onTabDragStart:this.onTabDragStart,onTabDragOver:this.onTabDragOver,onTabDragEnter:this.onTabDragEnter,onTabDrop:this.onTabDrop,onSubTabDragStart:this.onSubTabDragStart,onSubTabDragOver:this.onSubTabDragOver,onSubTabDrop:this.onSubTabDrop,onAttributeDragStart:this.onAttributeDragStart,onAttributeDragOver:this.onAttributeDragOver,onAttributeDrop:this.onAttributeDrop,tabData:e,sectIndex:t,tabIndex:a,state:this.state,actionButtons:this.actionButtons,openTab:this.openTab,deleteAttributeFromTab:this.deleteAttributeFromTab,onChangeHandler:this.onChangeHandler,handleFieldBlur:this.handleFieldBlur,handleFieldChange:this.handleFieldChange,handleStyleFieldChange:this.handleStyleFieldChange,handleStyleFieldBlur:this.handleStyleFieldBlur,handleSwitchChange:this.handleSwitchChange,setCurrentTab:this.setCurrentTab,displayNoData:this.displayNoData,openSetOptionPositionPopup:this.openSetOptionPositionPopup,openSetBoundaryPopup:this.openSetBoundaryPopup,selectedTabsList:this.selectedTabsList,tabThumbnailImages:this.tabThumbnailImages}))}},{key:"selectedTabsList",value:function(e,t,a,i){return d.a.createElement("div",{key:i,className:"promize-dragable-tab-container mr-10"},d.a.createElement("div",{className:"promize-widget mb-10"},d.a.createElement("div",{className:"promize-widget-header"},d.a.createElement("h3",{className:"promize-widget-title"},e.attribute_name))))}},{key:"addSectionArea",value:function(){var e,t=this,a=this.state,i=a.sections,n=a.tabs,s=a.editSection,r=this.state.activeSectionId,o=0,l=[];return n&&(l=Object.entries(n).sort(function(e,t){return e[1].sort_id-t[1].sort_id})),!r&&i&&(r=Object.keys(i)[0]),e=i[r],Object.keys(i).length>0?d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"promize-prdt-section-container mb-15",ref:"sectionContainer"},d.a.createElement("ul",{className:"promize-prdt-section-list",style:{width:this.state.sectionWrapperWidth?this.state.sectionWrapperWidth+"px":"100%"},ref:"sectionWrapper"},Object.keys(i).map(function(a,n){var s=i[a];return d.a.createElement("li",{className:a==e.promize_section_id&&"active",ref:function(e){return t.setRef(e,a)}},d.a.createElement("div",{className:"promize-section-name",onClick:function(e){e.preventDefault(),t.setState({activeSectionId:a})}},d.a.createElement("span",{className:"edit-icon",onClick:function(e){return t.editSection(a,a)}},d.a.createElement("i",{className:"fa fa-pencil-alt"})),d.a.createElement("span",null,s.section_name),d.a.createElement("span",{className:"promize-section-status active"})))})),d.a.createElement("div",{className:"pormize-abs-rght",ref:"sectionAddBtn"},d.a.createElement("button",{className:"btn btn-links",onClick:function(e){return t.addSection()}},d.a.createElement("i",{className:"fa fa-plus"})," Add Section")),s.show&&d.a.createElement("div",{className:"promize-card promize-card-edit",style:{left:s.data.x+"px"}},d.a.createElement("div",{className:"promize-card-body"},d.a.createElement(S.a,{form:this.section,fieldName:"section_name",value:s.data.section.section_name,labelName:"Section Name",validation:!1,onChange:this.sectionEdit}),d.a.createElement("div",{className:"df df-end"},Object.keys(i).length>1&&d.a.createElement("button",{className:"btn btn-promize-secondary",onClick:function(e){return t.sectionDelete(e,s)}},d.a.createElement("i",{className:"fa fa-trash"})," Remove"),d.a.createElement("button",{className:"btn btn-promize-primary",onClick:function(e){return t.saveSectionEdit(e,s)}},"Save"))))),e&&d.a.createElement("div",{className:"promize-dragable-container "},l&&l.length>0&&l.map(function(a,i){if(a[1].promize_section_id==e.promize_section_id)return 1==a[1].is_sub_tab?"":(o+=1,t.addSelectedtab(a[1],e.promize_section_id,a[0],o))}),d.a.createElement("div",{className:"text-right"},d.a.createElement("button",{onClick:function(a){return t.createTab(a,e.promize_section_id)},className:"btn btn-promize-primary"},"Add Tab")))):d.a.createElement(d.a.Fragment,null,d.a.createElement("div",null,d.a.createElement("button",{className:"btn btn-rnd",onClick:function(e){return t.addSection()}},d.a.createElement("i",{className:"fa fa-plus"})," Add Section")),this.displayNoData("No Sections available"))}},{key:"displayNoData",value:function(e){return d.a.createElement("div",{className:"promize-no-data"},d.a.createElement("img",{src:N.a}),d.a.createElement("p",{className:"mt-10"},e))}},{key:"attributeIcon",value:function(e){var t="fa fa-grin-hearts";return"text"==e?t="fa fa-font":"image"==e?t="fa fa-images":"option"==e&&(t="fa fa-cube"),d.a.createElement("i",{className:t})}},{key:"displayAttributeList",value:function(){var e=this,t=this.state,a=(t.sections,t.searchText),i=this.props.attributes.response.data;return a&&(i=i.filter(function(e){return-1!==e.attribute_name.toLowerCase().indexOf(a.toLowerCase())})),d.a.createElement("div",{className:"promize-card"},d.a.createElement("div",{className:"promize-card-header"},d.a.createElement("div",{className:"promize-card-title"},d.a.createElement("h3",null,d.a.createElement("span",null,"Attributes List")),d.a.createElement("p",{className:"promize-title-subtitle"},"Drag and drop attributes to tabs")),d.a.createElement("div",{className:"promize-sm-card-action df-end"},d.a.createElement("div",{className:"tab-links"},d.a.createElement(x.b,{to:"/attributes/add/",className:"btn btn-links"},d.a.createElement("i",{className:"fa fa-plus"})," Add New")))),d.a.createElement("div",{className:"promize-card-body"},d.a.createElement("div",{className:"promize-options"},d.a.createElement(w.a,{value:a,onChange:function(t){t.preventDefault(),e.setState({searchText:t.target.value||""})}}),d.a.createElement("div",{className:"promize-dragable-container mt-15"},d.a.createElement("ul",{className:"promize-dragable-list"},void 0!=i&&i.map(function(t,a){return d.a.createElement("li",{className:"mb-10",key:a,draggable:!0,onDragStart:function(a){return e.onDragStart(a,t,!1)}},d.a.createElement("div",{className:"dragable-items df ind"+a},d.a.createElement("div",{className:"option-action"},d.a.createElement("button",{className:"option-btn"},d.a.createElement("i",{className:"fa fa-bars"}))),d.a.createElement("div",{className:"option-name df-al-center pl-10 wd-100"},e.attributeIcon(t.attribute_type),t.attribute_name,d.a.createElement(x.b,{to:"/attributes/edit/"+t.promize_attribute_id},d.a.createElement("i",{className:"fa fa-eye"})))))}))))),d.a.createElement("div",{className:"promize-footer-actions"}))}},{key:"saveData",value:function(){E.a.success("Records saved successfully"),this.props.history.push("/products")}},{key:"render",value:function(){var e=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"promize-page-title-wrapper df-sp-btwn"},d.a.createElement("h3",{className:"promize-page-title"},this.props.state.fields.promize_customizer_name),d.a.createElement("button",{className:"btn btn-promize-primary",onClick:function(t){e.saveData()}},"Save")),d.a.createElement("div",{className:"promize-row df"},d.a.createElement("div",{className:"wd-70 mr-15"},this.state.setOptionPosition.show&&d.a.createElement(D,Object.assign({},this.state,this.props,{closePopup:this.closePopup,updateTabAttributeValues:this.updateTabAttributeValues})),this.state.setTabPosition.show&&d.a.createElement(F,Object.assign({},this.state,this.props,{closePopup:this.closePopup,imageForm:this.tabImages,updateTabImages:this.updateTabImages})),this.state.setBoundary.show&&d.a.createElement(V,Object.assign({},this.state,this.props,{closePopup:this.closePopup,updateTabAttributeValues:this.updateTabAttributeValues})),d.a.createElement("div",null," ",this.addSectionArea())),d.a.createElement("div",{className:"wd-30 promize-sticky-20"},this.displayAttributeList())),this.state.popup&&d.a.createElement(ae.a,Object.assign({},this.state.popup,{submitButton:"Remove",cancel:this.closePopup})))}}]),t}(u.Component);t.a=Object(b.b)(function(e){return{attributes:e.attributes,section:e.section,tab:e.tab,subTab:e.subTab,tabAttribute:e.tabAttribute,tabAttributevalues:e.tabAttributevalues,tabAttributevalueslist:e.tabAttributevalueslist,tabThumbnailImage:e.tabThumbnailImage}})(ne)},154:function(e,t){},155:function(e,t){},156:function(e,t){},381:function(e,t,a){"use strict";a.r(t);var i=a(8),n=a(7),s=a(5),r=a(17),o=a(16),l=a(27),c=a(18),m=a(0),p=a.n(m),u=a(19),d=a.n(u),b=a(4),h=a.n(b),_=a(22),g=a(130),v=a(151),f=a(111),E=a(82),y=a(40),z=a(34),N=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).saveView=function(e){var t=a.state.fields,n=t.model_image;n.push(Object(i.a)({},e,{id:Object(z.b)()})),a.setState({fields:Object(i.a)({},t,{model_image:n})})},a.updateView=function(e,t){var n=a.state.fields,s=n.model_image,r=h.a.findIndex(s,{id:e});s.splice(r,1,t),a.setState({fields:Object(i.a)({},n,{model_image:s})})},a.deleteView=function(e){var t=a.state.fields,n=t.model_image;h.a.remove(n,function(t){return t.id==e});var s=Object(i.a)({},t,{model_image:n});a.setState({fields:s})},a.isEdit=!1,a.state=Object(g.b)(),a.initialState=Object(g.b)(),a.state.openSection=!1,a.state.sections={promize_customizer_id:"",section_name:"",sort_id:"",status:!0},a.saveView=a.saveView.bind(Object(l.a)(a));var s=Object(g.c)(e),c=Object(v.b)(e);return a.product=y.a.getInstance(Object(l.a)(a),s,function(e){a.props.dispatch(Object(f.e)(e))},function(e){a.props.dispatch(Object(f.m)(e,"base_image","imageUpload"))},{}),a.section=y.a.getInstance(Object(l.a)(a),c,function(){a.props.dispatch(Object(f.f)(a.state.sections))},{},{}),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(!e.product.isFetching&&!e.product.isError){var t=this.state.fields,a=Object.assign({},t,{promize_customizer_id:e.product.response.records.promize_customizer_id});this.setState({fields:a,openSection:!0},function(){d.a.success("Product "+t.promize_customizer_name+" was created successfully")})}}},{key:"render",value:function(){var e=this.props,t=e.product,a=e.section;return p.a.createElement(p.a.Fragment,null,!this.state.openSection&&p.a.createElement("div",{className:"promize-card"},p.a.createElement("div",{className:"promize-card-header"},p.a.createElement("div",{className:"promize-card-title mb-10"},p.a.createElement("h3",null,p.a.createElement("span",null,"Add New Product"))),p.a.createElement("div",{className:"promize-card-action df-end"},p.a.createElement(E.a,Object.assign({},this.state,{labelName:"Status",fieldName:"status",dataName:"status",id:1,value:this.state.fields.status,spanLabel:{first:"Active",second:"Inactive"},checkValue:{first:!0,second:!1},validation:!1,form:this.section})))),p.a.createElement(g.a,Object.assign({},this.props,{currentComponent:this,saveView:this.saveView,updateView:this.updateView,deleteView:this.deleteView,form:this.product,product:t,state:this.state,reset:this.initialState,isEdit:!1}))),this.state.openSection&&p.a.createElement(v.a,Object.assign({},this.props,{currentComponent:this,form:this.section,section:a,state:this.state,isEdit:!1,new:!0})))}}]),t}(m.Component);t.default=Object(_.b)(function(e){return{product:e.product}})(N)},95:function(e,t,a){e.exports=a.p+"static/media/no-data.12573e6e.png"}}]);
//# sourceMappingURL=9.c8a471df.chunk.js.map